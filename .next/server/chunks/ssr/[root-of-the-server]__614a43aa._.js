module.exports=[224361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},703130,a=>{"use strict";var b=a.i(187924),c=a.i(497895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardHeader",()=>e,"CardTitle",()=>f])},254161,a=>{"use strict";var b=a.i(187924),c=a.i(811011),d=a.i(400187),e=a.i(497895);let f=(0,d.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function g({className:a,variant:d,asChild:g=!1,...h}){let i=g?c.Slot:"span";return(0,b.jsx)(i,{"data-slot":"badge",className:(0,e.cn)(f({variant:d}),a),...h})}a.s(["Badge",()=>g])},713513,a=>{"use strict";let b=(0,a.i(170106).default)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);a.s(["Camera",()=>b],713513)},921517,(a,b,c)=>{b.exports=a.x("http",()=>require("http"))},524836,(a,b,c)=>{b.exports=a.x("https",()=>require("https"))},254799,(a,b,c)=>{b.exports=a.x("crypto",()=>require("crypto"))},688947,(a,b,c)=>{b.exports=a.x("stream",()=>require("stream"))},792509,(a,b,c)=>{b.exports=a.x("url",()=>require("url"))},406461,(a,b,c)=>{b.exports=a.x("zlib",()=>require("zlib"))},522734,(a,b,c)=>{b.exports=a.x("fs",()=>require("fs"))},917171,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(30553),e=c.forwardRef((a,c)=>(0,b.jsx)(d.Primitive.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));e.displayName="Label";var f=a.i(497895);function g({className:a,...c}){return(0,b.jsx)(e,{"data-slot":"label",className:(0,f.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...c})}a.s(["Label",()=>g],917171)},280281,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(507554),e=a.i(470121),f=a.i(750104),g=a.i(225152),h=a.i(3688),i=a.i(30553),j="Switch",[k,l]=(0,f.createContextScope)(j),[m,n]=k(j),o=c.forwardRef((a,f)=>{let{__scopeSwitch:h,name:j,checked:k,defaultChecked:l,required:n,disabled:o,value:p="on",onCheckedChange:q,form:t,...u}=a,[v,w]=c.useState(null),x=(0,e.useComposedRefs)(f,a=>w(a)),y=c.useRef(!1),z=!v||t||!!v.closest("form"),[A=!1,B]=(0,g.useControllableState)({prop:k,defaultProp:l,onChange:q});return(0,b.jsxs)(m,{scope:h,checked:A,disabled:o,children:[(0,b.jsx)(i.Primitive.button,{type:"button",role:"switch","aria-checked":A,"aria-required":n,"data-state":s(A),"data-disabled":o?"":void 0,disabled:o,value:p,...u,ref:x,onClick:(0,d.composeEventHandlers)(a.onClick,a=>{B(a=>!a),z&&(y.current=a.isPropagationStopped(),y.current||a.stopPropagation())})}),z&&(0,b.jsx)(r,{control:v,bubbles:!y.current,name:j,value:p,checked:A,required:n,disabled:o,form:t,style:{transform:"translateX(-100%)"}})]})});o.displayName=j;var p="SwitchThumb",q=c.forwardRef((a,c)=>{let{__scopeSwitch:d,...e}=a,f=n(p,d);return(0,b.jsx)(i.Primitive.span,{"data-state":s(f.checked),"data-disabled":f.disabled?"":void 0,...e,ref:c})});q.displayName=p;var r=a=>{let d,{control:e,checked:f,bubbles:g=!0,...i}=a,j=c.useRef(null),k=(d=c.useRef({value:f,previous:f}),c.useMemo(()=>(d.current.value!==f&&(d.current.previous=d.current.value,d.current.value=f),d.current.previous),[f])),l=(0,h.useSize)(e);return c.useEffect(()=>{let a=j.current,b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(k!==f&&b){let c=new Event("click",{bubbles:g});b.call(a,f),a.dispatchEvent(c)}},[k,f,g]),(0,b.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:f,...i,tabIndex:-1,ref:j,style:{...a.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function s(a){return a?"checked":"unchecked"}var t=a.i(497895);function u({className:a,...c}){return(0,b.jsx)(o,{"data-slot":"switch",className:(0,t.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...c,children:(0,b.jsx)(q,{"data-slot":"switch-thumb",className:"bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0"})})}a.s(["Switch",()=>u],280281)},363282,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(346271),e=a.i(340695),f=a.i(703130),g=a.i(254161),h=a.i(280281),i=a.i(917171),j=a.i(602150),k=a.i(64791),l=a.i(355707),m=a.i(177156),n=a.i(73570),o=a.i(212439),p=a.i(252920),q=a.i(603314),r=a.i(713513),s=a.i(297651),t=a.i(181977),u=a.i(409e3);let v={cow:"Cow",dog:"Dog",buffalo:"Buffalo",pothole:"Pothole",debris:"Debris",pedestrian:"Pedestrian"};function w(){let a=(0,c.useRef)(null),w=(0,c.useRef)(null),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(!0),[F,G]=(0,c.useState)(null),[H,I]=(0,c.useState)([]),[J,K]=(0,c.useState)({overallStatus:"safe",riskScore:0,alertnessRisk:0,hazardRisk:0,timestamp:Date.now(),shouldAlert:!1,alertMessage:null}),[L,M]=(0,c.useState)(()=>(0,t.createAlertnessWindow)()),[N,O]=(0,c.useState)(!1),[P,Q]=(0,c.useState)([]),R=(0,c.useRef)(null),S=(0,c.useCallback)(async()=>{try{let b=await (0,u.runRealDrowsinessDetection)(a.current);if(b){G(b);let a=(0,t.updateAlertnessWindow)(L,b.alertnessScore);M(a)}else{let a=(0,t.updateAlertnessWindow)(L,L.average);M(a)}let c=[];z?(c=await (0,u.runRealHazardDetection)(w.current),I(c)):I([]);let d=(0,t.assessRisk)(b,c,L.average);K(d),d.shouldAlert&&!N&&(O(!0),Q(a=>[...a.slice(-9),{time:new Date,message:d.alertMessage||"Alert triggered",status:d.overallStatus}]),D&&R.current&&R.current.play().catch(()=>{}),setTimeout(()=>O(!1),5e3)),T(c)}catch(a){console.error("runDetection error",a)}},[L,N,D,z]),T=a=>{},U=async()=>{if(x){let b=a.current?.srcObject;b?.getTracks().forEach(a=>a.stop()),a.current&&(a.current.srcObject=null),y(!1)}else try{let b=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:640,height:480}});a.current&&(a.current.srcObject=b,y(!0))}catch(a){console.error("Front camera access failed:",a)}},V=async()=>{if(z){let a=w.current?.srcObject;a?.getTracks().forEach(a=>a.stop()),w.current&&(w.current.srcObject=null),A(!1)}else try{let a=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:1280,height:720}});w.current&&(w.current.srcObject=a,A(!0))}catch(a){console.error("Rear camera access failed:",a)}};(0,c.useEffect)(()=>{if(!B)return;let a=setInterval(S,500);return()=>clearInterval(a)},[B,S]);let W=(a=>{switch(a){case"safe":return{label:"SAFE",bg:"bg-success",text:"text-success"};case"caution":return{label:"CAUTION",bg:"bg-warning",text:"text-warning"};case"high-risk":return{label:"HIGH RISK",bg:"bg-destructive",text:"text-destructive"}}})(J.overallStatus);return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("audio",{ref:R,preload:"auto"}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"Vision-AI Live"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Real-time drowsiness and hazard monitoring"})]}),(0,b.jsx)(e.Button,{onClick:()=>C(!B),variant:B?"destructive":"default",children:B?"Stop Vision-AI":"Start Vision-AI"})]}),(0,b.jsx)(d.motion.div,{className:`p-4 rounded-xl border ${"high-risk"===J.overallStatus?"border-destructive bg-destructive/10":"caution"===J.overallStatus?"border-warning bg-warning/10":"border-success bg-success/10"}`,children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:`h-12 w-12 rounded-full flex items-center justify-center ${W.bg}`,children:(0,b.jsx)(q.Shield,{className:"h-6 w-6 text-white"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:`text-xl font-bold ${W.text}`,children:W.label}),(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Risk Score: ",J.riskScore,"%"]})]})]})}),(0,b.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{className:"pb-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(m.Eye,{className:"h-5 w-5 text-primary"}),(0,b.jsxs)("div",{children:[(0,b.jsx)(f.CardTitle,{children:"Front Camera"}),(0,b.jsx)(f.CardDescription,{children:"Driver Alertness"})]})]}),(0,b.jsx)(e.Button,{onClick:U,variant:x?"destructive":"outline",size:"sm",children:x?(0,b.jsx)(l.VideoOff,{className:"h-4 w-4"}):(0,b.jsx)(k.Video,{className:"h-4 w-4"})})]})}),(0,b.jsx)(f.CardContent,{className:"p-0",children:(0,b.jsxs)("div",{className:"relative aspect-video bg-secondary/30",children:[(0,b.jsx)("video",{ref:a,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),!x&&(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,b.jsx)(m.Eye,{className:"h-12 w-12 text-muted-foreground/30"})}),x&&F&&(0,b.jsxs)("div",{className:"absolute bottom-4 left-4 right-4 bg-background/80 backdrop-blur rounded-lg p-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("span",{className:"text-sm",children:"Alertness"}),(0,b.jsxs)("span",{className:`font-bold ${(0,t.getStatusColor)(J.overallStatus)}`,children:[Math.round(L.average),"%"]})]}),(0,b.jsx)(j.Progress,{value:L.average,className:"h-2"})]})]})})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{className:"pb-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(n.AlertTriangle,{className:"h-5 w-5 text-warning"}),(0,b.jsxs)("div",{children:[(0,b.jsx)(f.CardTitle,{children:"Rear Camera"}),(0,b.jsx)(f.CardDescription,{children:"Road Hazards"})]})]}),(0,b.jsx)(e.Button,{onClick:V,variant:z?"destructive":"outline",size:"sm",children:z?(0,b.jsx)(l.VideoOff,{className:"h-4 w-4"}):(0,b.jsx)(r.Camera,{className:"h-4 w-4"})})]})}),(0,b.jsx)(f.CardContent,{className:"p-0",children:(0,b.jsxs)("div",{className:"relative aspect-video bg-secondary/30",children:[(0,b.jsx)("video",{ref:w,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),!z&&(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,b.jsx)(r.Camera,{className:"h-12 w-12 text-muted-foreground/30"})}),z&&H.length>0&&(0,b.jsx)("div",{className:"absolute top-4 right-4",children:(0,b.jsxs)(g.Badge,{variant:"destructive",className:"animate-pulse",children:[H.length," Hazard Detected"]})})]})})]})]}),(0,b.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsxs)(f.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(s.Gauge,{className:"h-5 w-5"}),"Risk Meter"]})}),(0,b.jsxs)(f.CardContent,{children:[(0,b.jsxs)("div",{className:`text-4xl font-bold text-center mb-4 ${(0,t.getStatusColor)(J.overallStatus)}`,children:[J.riskScore,"%"]}),(0,b.jsx)("div",{className:"h-3 rounded-full bg-gradient-to-r from-success via-warning to-destructive"})]})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{children:"Active Hazards"})}),(0,b.jsx)(f.CardContent,{children:0===H.length?(0,b.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No hazards detected"}):(0,b.jsx)("div",{className:"space-y-2",children:H.map(a=>(0,b.jsx)("div",{className:"p-2 rounded-lg bg-warning/10 border border-warning/20",children:(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"font-medium",children:v[a.objectClass]}),(0,b.jsxs)("span",{className:"text-sm",children:[Math.round(100*a.confidence),"%"]})]})},a.id))})})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{children:"Settings"})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[D?(0,b.jsx)(o.Volume2,{className:"h-4 w-4"}):(0,b.jsx)(p.VolumeX,{className:"h-4 w-4"}),(0,b.jsx)(i.Label,{children:"Alert Sounds"})]}),(0,b.jsx)(h.Switch,{checked:D,onCheckedChange:E})]})})]})]})]})}a.s(["default",()=>w])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__614a43aa._.js.map