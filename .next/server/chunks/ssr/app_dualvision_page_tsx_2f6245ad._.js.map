{"version":3,"sources":["../../../../app/dualvision/page.tsx","../../../../lib/supabase/analytics.ts","../../../../components/ui/alert-notification.tsx","../../../../components/ui/dialog.tsx"],"sourcesContent":["\"use client\"\n\nimport { loadModels } from \"@/lib/models\"\nimport { runRealDrowsinessDetection, runRealHazardDetection, getCurrentAlert, triggerAlert } from \"@/lib/detection\"\nimport { logDrowsinessEvent, logHazardEvents, startVaseSession, endVaseSession, logVaseAlert, saveEmergencyContact, getEmergencyContact } from \"@/lib/supabase/analytics\"\nimport { useState, useRef, useCallback, useEffect } from \"react\"\nimport { motion } from \"framer-motion\"\nimport { Button } from \"@/components/ui/button\"\nimport { AlertNotification } from \"@/components/ui/alert-notification\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Switch } from \"@/components/ui/switch\"\nimport { Label } from \"@/components/ui/label\"\nimport { Input } from \"@/components/ui/input\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Progress } from \"@/components/ui/progress\"\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\"\nimport {\n  Eye,\n  Video,\n  VideoOff,\n  Volume2,\n  VolumeX,\n  AlertTriangle,\n  ArrowLeft,\n  Shield,\n  Bell,\n  Camera,\n  Gauge,\n} from \"lucide-react\"\nimport Link from \"next/link\"\nimport { VisionAILogo } from \"@/components/ui/vision-ai-logo\"\nimport type { DVSERiskAssessment, DrowsinessMetrics, HazardDetection, SafetyStatus, AlertnessWindow } from \"@/lib/types\"\nimport {\n  assessRisk,\n  createAlertnessWindow,\n  updateAlertnessWindow,\n  getStatusColor,\n} from \"@/lib/dvse/engine\"\n\n// Hazard class labels\nconst hazardLabels: Record<string, string> = {\n  cow: \"Cow\",\n  dog: \"Dog\",\n  buffalo: \"Buffalo\",\n  pothole: \"Pothole\",\n  debris: \"Debris\",\n  pedestrian: \"Pedestrian\",\n  broken_vehicle: \"Broken Vehicle\",\n  fallen_tree: \"Fallen Tree\",\n  vehicle: \"Vehicle\",\n  animal: \"Animal\",\n  animal_large: \"Large Animal\",\n  bear: \"Bear\",\n  cat: \"Cat\",\n  horse: \"Horse\"\n}\n\nexport default function DualVisionDemo() {\n  // Camera refs\n  const frontVideoRef = useRef<HTMLVideoElement>(null)\n  const rearVideoRef = useRef<HTMLVideoElement>(null)\n  const frontCanvasRef = useRef<HTMLCanvasElement>(null)\n  const rearCanvasRef = useRef<HTMLCanvasElement>(null)\n\n  // State\n  const [frontCameraActive, setFrontCameraActive] = useState(false)\n  const [rearCameraActive, setRearCameraActive] = useState(false)\n  const [isProcessing, setIsProcessing] = useState(false)\n  const [alert, setAlert] = useState<{ type: 'hazard' | 'drowsiness' | null, message: string }>({ type: null, message: '' })\n  const [soundEnabled, setSoundEnabled] = useState(true)\n  const [emergencyContact, setEmergencyContact] = useState(\"\")\n\n  // VASE State\n  const [drowsiness, setDrowsiness] = useState<DrowsinessMetrics | null>(null)\n  const [hazards, setHazards] = useState<HazardDetection[]>([])\n  const [riskAssessment, setRiskAssessment] = useState<DVSERiskAssessment>({\n    overallStatus: \"safe\",\n    riskScore: 0,\n    alertnessRisk: 0,\n    hazardRisk: 0,\n    timestamp: Date.now(),\n    shouldAlert: false,\n    alertMessage: null,\n  })\n  const [alertnessWindow, setAlertnessWindow] = useState<AlertnessWindow>(() => createAlertnessWindow())\n  const [alertHistory, setAlertHistory] = useState<{ time: Date; message: string; status: SafetyStatus }[]>([])\n\n  const audioRef = useRef<HTMLAudioElement | null>(null)\n  const sessionStartRef = useRef<Date | null>(null)\n  const sessionIdRef = useRef<string | null>(null)\n  const alertCountRef = useRef(0)\n  const hazardCountRef = useRef(0)\n  const alertnessSumRef = useRef(0)\n  const alertnessSamplesRef = useRef(0)\n  const lastAlertTime = useRef(0)\n\n  // Load persistence\n  useEffect(() => {\n    getEmergencyContact().then(email => {\n      if (email) setEmergencyContact(email);\n    });\n  }, []);\n\n  const handleSaveContact = async () => {\n    if (!emergencyContact || !emergencyContact.includes(\"@\")) {\n      window.alert(\"Please enter a valid email.\");\n      return;\n    }\n    try {\n      await saveEmergencyContact(emergencyContact);\n      window.alert(`Emergency contact saved to Supabase: ${emergencyContact}`);\n    } catch (e) {\n      console.error(e);\n      window.alert(\"Failed to save contact. See console.\");\n    }\n  };\n\n  // Startup Guide State\n  const [showGuide, setShowGuide] = useState(false)\n\n  // Show guide on mount once\n  useEffect(() => {\n    setShowGuide(true)\n  }, [])\n\n  // ================= CAMERA DEVICE HELPER =================\n  async function getCameraDevices() {\n    const devices = await navigator.mediaDevices.enumerateDevices()\n    const cams = devices.filter(d => d.kind === \"videoinput\")\n\n    // FRONT CAMERA → Laptop webcam\n    const frontCam =\n      cams.find(c => c.label.toLowerCase().includes(\"integrated\")) ||\n      cams[0]\n\n    // REAR CAMERA → Phone webcam (DroidCam / Iriun)\n    const rearCam = cams.find(c =>\n      c.label.toLowerCase().includes(\"iriun\") ||\n      c.label.toLowerCase().includes(\"droid\")\n    )\n\n    return { frontCam, rearCam }\n  }\n\n  // Main detection loop\n  const runDetection = useCallback(async () => {\n    // Drowsiness (front)\n    let newDrowsiness = null\n    if (frontCameraActive && frontVideoRef.current) {\n      try {\n        const dr = await runRealDrowsinessDetection(frontVideoRef.current)\n        if (dr) {\n          newDrowsiness = dr\n          setDrowsiness(dr)\n          const newWindow = updateAlertnessWindow(alertnessWindow, dr.alertnessScore)\n          setAlertnessWindow(newWindow)\n        }\n      } catch (err) {\n        console.error(\"Real drowsiness detection error:\", err)\n      }\n    } else {\n      newDrowsiness = drowsiness\n    }\n\n    // Hazards (rear)\n    let newHazards: HazardDetection[] = []\n    if (rearCameraActive && rearVideoRef.current) {\n      try {\n        newHazards = await runRealHazardDetection(rearVideoRef.current)\n        setHazards(newHazards)\n      } catch (err) {\n        console.error(\"Real hazard detection error:\", err)\n        newHazards = []\n      }\n    } else {\n      newHazards = []\n      setHazards([])\n    }\n\n    // Access Risk\n    const smoothed = alertnessWindow.average\n    const assessment = assessRisk(newDrowsiness, newHazards, smoothed)\n    setRiskAssessment(assessment)\n\n    // accumulate stats\n    if (newDrowsiness) {\n      alertnessSumRef.current += newDrowsiness.alertnessScore\n      alertnessSamplesRef.current += 1\n    }\n    hazardCountRef.current += newHazards.length\n\n    // Log per-tick\n    if (newDrowsiness) {\n      logDrowsinessEvent({\n        alertnessScore: newDrowsiness.alertnessScore,\n        ear: newDrowsiness.eyeAspectRatio,\n        blinkFrequency: newDrowsiness.blinkFrequency,\n        triggeredAlert: assessment.shouldAlert,\n        sessionId: sessionIdRef.current,\n      })\n    }\n\n    if (newHazards.length > 0) {\n      logHazardEvents(newHazards, sessionIdRef.current)\n    }\n\n    // Handle Alerts\n    if (assessment.shouldAlert) {\n      alertCountRef.current += 1\n\n      // Determine Alert Type\n      let alertType: 'hazard' | 'drowsiness' | null = null;\n      let detailedMessage = \"\";\n\n      if (assessment.overallStatus === 'high-risk' || assessment.hazardRisk > 50) {\n        alertType = 'hazard';\n        // Filter to distinct hazard labels\n        const distinctHazards = Array.from(new Set(newHazards.map(h => hazardLabels[h.objectClass] || h.objectClass)));\n        detailedMessage = `HAZARD: ${distinctHazards.join(\", \")}`;\n      } else if (newDrowsiness && newDrowsiness.alertnessScore < 60) {\n        alertType = 'drowsiness';\n        detailedMessage = `DROWSINESS: Alertness ${newDrowsiness.alertnessScore}%`;\n      }\n\n      if (alertType) {\n        // DEBOUNCE LOGIC: Only update if different or enough time passed\n        // This prevents \"boomerang\" flickering\n        const now = Date.now();\n        if (alert.type !== alertType || alert.message !== detailedMessage || (now - lastAlertTime.current) > 2000) {\n          triggerAlert(alertType);\n          setAlert({\n            type: alertType,\n            message: detailedMessage\n          });\n          lastAlertTime.current = now;\n\n          // Verify we don't spam history\n          const lastHistory = alertHistory[alertHistory.length - 1];\n          if (!lastHistory || lastHistory.message !== detailedMessage || (now - lastHistory.time.getTime()) > 5000) {\n            setAlertHistory((prev) => [\n              ...prev.slice(-9),\n              { time: new Date(), message: detailedMessage, status: assessment.overallStatus },\n            ])\n          }\n        }\n\n        // Auto-send email logic (Backend API)\n        const highSeverityHazards = [\"cow\", \"buffalo\", \"deer\", \"bear\", \"fallen_tree\", \"pothole\", \"wrong_way_vehicle\"];\n        const hasCritical = newHazards.some(h => highSeverityHazards.includes(h.objectClass));\n        const criticalDrowsiness = newDrowsiness && newDrowsiness.alertnessScore < 30;\n\n        if ((hasCritical || criticalDrowsiness) && emergencyContact) {\n          // Rate Limit: Only send 1 email per 60 seconds to avoid spamming user\n          const lastEmail = localStorage.getItem('last_emergency_email');\n          const now = Date.now();\n\n          if (!lastEmail || (now - parseInt(lastEmail)) > 60000) {\n            console.log(\"Triggering Emergency Email to:\", emergencyContact);\n            localStorage.setItem('last_emergency_email', now.toString());\n\n            fetch('/api/email-alert', {\n              method: 'POST',\n              headers: { 'Content-Type': 'application/json' },\n              body: JSON.stringify({\n                to: emergencyContact,\n                subject: `URGENT: Vision-AI ${alertType?.toUpperCase()} Alert`,\n                message: `Vision-AI detected a critical safety event.\\n\\nType: ${alertType}\\nDetails: ${detailedMessage}\\nTime: ${new Date().toLocaleString()}\\n\\nPlease check on the driver immediately.`\n              })\n            }).catch(err => console.error(\"Failed to send email:\", err));\n          }\n        }\n      }\n    } else {\n      // Clear alert if safe for > 2 seconds (Debounce clearing)\n      // This prevents the alert from disappearing instantly if detection flickers for 1 frame\n      if (alert.type) {\n        const now = Date.now();\n        if ((now - lastAlertTime.current) > 2000) {\n          setAlert({ type: null, message: '' });\n        }\n      }\n    }\n\n    // draw boxes\n    drawDetections(newHazards)\n  }, [frontCameraActive, rearCameraActive, alertnessWindow, drowsiness, alert, soundEnabled, emergencyContact, alertHistory])\n\n  // Draw bounding boxes on rear camera canvas\n  const drawDetections = (detections: HazardDetection[]) => {\n    const canvas = rearCanvasRef.current\n    const video = rearVideoRef.current\n    if (!canvas || !video) return\n\n    const ctx = canvas.getContext(\"2d\")\n    if (!ctx) return\n\n    canvas.width = video.videoWidth || 640\n    canvas.height = video.videoHeight || 480\n    ctx.clearRect(0, 0, canvas.width, canvas.height)\n\n    detections.forEach((det) => {\n      const x = det.bbox.x * canvas.width\n      const y = det.bbox.y * canvas.height\n      const w = det.bbox.width * canvas.width\n      const h = det.bbox.height * canvas.height\n\n      // Color based on severity\n      const colors = {\n        critical: \"#ef4444\",\n        high: \"#f59e0b\",\n        medium: \"#06b6d4\",\n        low: \"#22c55e\",\n      } as const\n      ctx.strokeStyle = colors[det.severity]\n      ctx.lineWidth = 3\n      ctx.strokeRect(x, y, w, h)\n\n      // Label\n      const label = `${hazardLabels[det.objectClass] || det.objectClass} ${Math.round(det.confidence * 100)}%`\n      ctx.fillStyle = ctx.strokeStyle\n      const textWidth = ctx.measureText(label).width\n      ctx.fillRect(x, y - 24, textWidth + 12, 24)\n      ctx.fillStyle = \"#fff\"\n      ctx.font = \"14px sans-serif\"\n      ctx.fillText(label, x + 6, y - 7)\n    })\n  }\n\n  // ================= FRONT CAMERA (Laptop Webcam) =================\n  const toggleFrontCamera = async () => {\n    if (frontCameraActive) {\n      // Stop front camera\n      const stream = frontVideoRef.current?.srcObject as MediaStream\n      stream?.getTracks().forEach(track => track.stop())\n      if (frontVideoRef.current) frontVideoRef.current.srcObject = null\n      setFrontCameraActive(false)\n      return\n    }\n\n    try {\n      const { frontCam } = await getCameraDevices()\n\n      if (!frontCam) {\n        console.error(\"No front (laptop) camera found\")\n        return\n      }\n\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          deviceId: frontCam.deviceId,\n          width: 640,\n          height: 480,\n        },\n      })\n\n      if (frontVideoRef.current) {\n        frontVideoRef.current.srcObject = stream\n        await frontVideoRef.current.play()\n        setFrontCameraActive(true)\n        if (!sessionStartRef.current) sessionStartRef.current = new Date()\n      }\n    } catch (err) {\n      console.error(\"Front camera access failed:\", err)\n    }\n  }\n\n\n  // ================= REAR CAMERA (Phone Webcam) =================\n  const toggleRearCamera = async () => {\n    if (rearCameraActive) {\n      // Stop rear camera\n      const stream = rearVideoRef.current?.srcObject as MediaStream\n      stream?.getTracks().forEach(track => track.stop())\n      if (rearVideoRef.current) rearVideoRef.current.srcObject = null\n      setRearCameraActive(false)\n      return\n    }\n\n    try {\n      const { rearCam } = await getCameraDevices()\n\n      if (!rearCam) {\n        console.error(\"No phone (rear) camera found. Is DroidCam/Iriun running?\")\n        return\n      }\n\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          deviceId: rearCam.deviceId,\n          width: 1280,\n          height: 720,\n        },\n      })\n\n      if (rearVideoRef.current) {\n        rearVideoRef.current.srcObject = stream\n        await rearVideoRef.current.play()\n        setRearCameraActive(true)\n        setHazards([]) // Clear old hazards\n        if (!sessionStartRef.current) sessionStartRef.current = new Date()\n      }\n    } catch (err) {\n      console.error(\"Rear camera access failed:\", err)\n    }\n  }\n\n\n  // Toggle processing\n  const toggleProcessing = () => {\n    if (!isProcessing) {\n      // starting a new VASE session\n      startVaseSession().then((id) => {\n        sessionIdRef.current = id\n        alertCountRef.current = 0\n        hazardCountRef.current = 0\n        alertnessSumRef.current = 0\n        alertnessSamplesRef.current = 0\n      })\n    } else {\n      // stopping session: finalize stats\n      if (sessionIdRef.current) {\n        const averageAlertness =\n          alertnessSamplesRef.current > 0 ? alertnessSumRef.current / alertnessSamplesRef.current : null\n\n        endVaseSession({\n          sessionId: sessionIdRef.current,\n          startTime: sessionStartRef.current,\n          totalAlerts: alertCountRef.current,\n          averageAlertness,\n          hazardsDetected: hazardCountRef.current,\n          emergencyContactNotified: false,\n        })\n      }\n      sessionIdRef.current = null\n    }\n    setIsProcessing(!isProcessing)\n  }\n\n  // Run detection loop when processing\n  useEffect(() => {\n    if (!isProcessing) return\n\n    let active = true\n\n    const loop = async () => {\n      while (active && isProcessing) {\n        await runDetection() // wait for model to finish\n        await new Promise((r) => setTimeout(r, 500)) // pause 500ms\n      }\n    }\n\n    loop()\n\n    return () => {\n      active = false\n    }\n  }, [isProcessing, runDetection])\n\n  useEffect(() => {\n    // Listen for alert changes\n    const checkAlert = () => {\n      const currentAlert = getCurrentAlert();\n      if (currentAlert) {\n        setAlert({\n          type: currentAlert,\n          message: currentAlert === 'hazard'\n            ? 'Potential hazard detected.'\n            : 'Drowsiness detected.'\n        });\n      } else {\n        setAlert({ type: null, message: '' });\n      }\n    };\n\n    const alertInterval = setInterval(checkAlert, 1000);\n    return () => clearInterval(alertInterval);\n  }, []);\n\n  // Load TensorFlow models on client mount only\n  useEffect(() => {\n    if (typeof window === \"undefined\") return // prevent SSR failures\n\n    let mounted = true\n      ; (async () => {\n        try {\n          console.log(\"Loading TFJS models...\")\n          await loadModels()\n          if (mounted) console.log(\"Models ready ✔\")\n        } catch (err) {\n          console.error(\"Error loading models:\", err)\n        }\n      })()\n\n    return () => {\n      mounted = false\n    }\n  }, [])\n\n  // Get status display\n  const getStatusDisplay = (status: SafetyStatus) => {\n    switch (status) {\n      case \"safe\":\n        return { label: \"SAFE\", bg: \"bg-success\", text: \"text-success\" }\n      case \"caution\":\n        return { label: \"CAUTION\", bg: \"bg-warning\", text: \"text-warning\" }\n      case \"high-risk\":\n        return { label: \"HIGH RISK\", bg: \"bg-destructive\", text: \"text-destructive\" }\n    }\n  }\n\n  const statusDisplay = getStatusDisplay(riskAssessment.overallStatus)\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Startup Guide Dialog */}\n      <Dialog open={showGuide} onOpenChange={setShowGuide}>\n        <DialogContent className=\"sm:max-w-md\">\n          <DialogHeader>\n            <DialogTitle>Welcome to VASE (Vision-AI Safety Engine)</DialogTitle>\n            <DialogDescription className=\"pt-2 space-y-2\">\n              <p>\n                To utilize the <strong>Dual-Vision</strong> capabilities effectively, please ensure:\n              </p>\n              <ul className=\"list-disc pl-5 space-y-1\">\n                <li>\n                  <strong>Front Camera:</strong> To monitor driver drowsiness.\n                </li>\n                <li>\n                  <strong>Rear Camera:</strong> Connect an external webcam/dashcam or use your phone to monitor the road ahead.\n                </li>\n              </ul>\n              <p className=\"text-xs text-muted-foreground mt-2\">\n                This setup allows VASE to detect both internal driver state and external road hazards simultaneously.\n              </p>\n            </DialogDescription>\n          </DialogHeader>\n          <DialogFooter className=\"sm:justify-start gap-2\">\n            <Button type=\"button\" onClick={() => setShowGuide(false)}>\n              I Understand\n            </Button>\n            <Button type=\"button\" variant=\"secondary\" onClick={() => setShowGuide(false)}>\n              Close\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* Audio for alerts */}\n      <audio ref={audioRef} preload=\"auto\">\n        <source\n          src=\"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2teleU9PT46xvqF0Q0VBetjD2aJtOUJdxN7j4Z2CUUpBfbG8rH1LS0ttyuLx8qqIU0tBfaq6rnlKSEtzz+j2+qqJVEpAf6m5r3pJR0p40O3++q2MVUY8g6y5r31KSEp40vD//7GOVkY7hK66sH5KSUl41PL//7KQWEI4h6+7sYBLSkh41vT//7WSWUE2iLC8soFMS0h41/X//7iTW0E1irC8s4JNTEh52Pb//7qUXEAzjLG9tIROTUd52ff//7yVXkAyi7K+tYVPTkd52vj//76XX0Axi7O/toZQT0Z63Pn//8CYYEA…\"\n          type=\"audio/wav\"\n        />\n      </audio>\n\n      {/* Alert Notifications */}\n      <AlertNotification\n        type={alert.type}\n        message={alert.message}\n        onClose={() => setAlert({ type: null, message: '' })}\n      />\n\n      {/* Header */}\n      <header className=\"border-b border-border bg-card/50 backdrop-blur sticky top-0 z-40\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex items-center justify-between h-16\">\n            <div className=\"flex items-center gap-4\">\n              <Link\n                href=\"/\"\n                className=\"flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors\"\n              >\n                <ArrowLeft className=\"h-4 w-4\" />\n                <span className=\"hidden sm:inline\">Back</span>\n              </Link>\n              <VisionAILogo size=\"sm\" />\n            </div>\n            <Badge variant=\"secondary\" className=\"gap-1\">\n              <Shield className=\"h-3 w-3\" />\n              Vision-AI Safety Engine (VASE)\n            </Badge>\n          </div>\n        </div>\n      </header>\n\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {/* Risk Assessment Banner */}\n        <motion.div\n          className={`mb-6 p-4 rounded-xl border ${riskAssessment.overallStatus === \"high-risk\"\n            ? \"border-destructive bg-destructive/10\"\n            : riskAssessment.overallStatus === \"caution\"\n              ? \"border-warning bg-warning/10\"\n              : \"border-success bg-success/10\"\n            }`}\n          animate={riskAssessment.shouldAlert ? { scale: [1, 1.02, 1] } : {}}\n          transition={{ duration: 0.5, repeat: riskAssessment.shouldAlert ? Number.POSITIVE_INFINITY : 0 }}\n        >\n          <div className=\"flex flex-col sm:flex-row items-center justify-between gap-4\">\n            <div className=\"flex items-center gap-4\">\n              <div className={`h-16 w-16 rounded-full flex items-center justify-center ${statusDisplay.bg}`}>\n                <Shield className=\"h-8 w-8 text-white\" />\n              </div>\n              <div>\n                <div className={`text-2xl font-bold ${statusDisplay.text}`}>{statusDisplay.label}</div>\n                <div className=\"text-sm text-muted-foreground\">\n                  Risk Score: {riskAssessment.riskScore}% | Alertness Risk: {Math.round(riskAssessment.alertnessRisk)}% | Hazard\n                  Risk: {riskAssessment.hazardRisk}%\n                </div>\n              </div>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <Button onClick={toggleProcessing} variant={isProcessing ? \"destructive\" : \"default\"} size=\"lg\">\n                {isProcessing ? \"Stop VASE\" : \"Start VASE\"}\n              </Button>\n            </div>\n          </div>\n        </motion.div>\n\n        <div className=\"grid lg:grid-cols-2 gap-6\">\n          {/* Front Camera - Drowsiness */}\n          <Card>\n            <CardHeader className=\"pb-4\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-2\">\n                  <Eye className=\"h-5 w-5 text-primary\" />\n                  <div>\n                    <CardTitle>Front Camera</CardTitle>\n                    <CardDescription>Driver Alertness Monitoring</CardDescription>\n                  </div>\n                </div>\n                <Button onClick={toggleFrontCamera} variant={frontCameraActive ? \"destructive\" : \"outline\"} size=\"sm\">\n                  {frontCameraActive ? <VideoOff className=\"h-4 w-4\" /> : <Video className=\"h-4 w-4\" />}\n                </Button>\n              </div>\n            </CardHeader>\n            <CardContent className=\"p-0\">\n              <div className=\"relative aspect-video bg-secondary/30\">\n                <video ref={frontVideoRef} autoPlay playsInline muted className=\"w-full h-full object-cover\" />\n                <canvas ref={frontCanvasRef} className=\"absolute inset-0 w-full h-full pointer-events-none\" />\n\n                {!frontCameraActive && (\n                  <div className=\"absolute inset-0 flex items-center justify-center\">\n                    <div className=\"text-center\">\n                      <Eye className=\"h-12 w-12 text-muted-foreground/30 mx-auto mb-2\" />\n                      <p className=\"text-sm text-muted-foreground\">Front camera for drowsiness detection</p>\n                    </div>\n                  </div>\n                )}\n\n                {/* Drowsiness Overlay */}\n                {frontCameraActive && drowsiness && (\n                  <div className=\"absolute bottom-4 left-4 right-4 bg-background/80 backdrop-blur rounded-lg p-3\">\n                    <div className=\"flex items-center justify-between mb-2\">\n                      <span className=\"text-sm font-medium\">Alertness</span>\n                      <span className={`text-lg font-bold ${getStatusColor(riskAssessment.overallStatus)}`}>\n                        {Math.round(alertnessWindow.average)}%\n                      </span>\n                    </div>\n                    <Progress value={alertnessWindow.average} className=\"h-2\" />\n                    <div className=\"flex justify-between text-xs text-muted-foreground mt-2\">\n                      <span>EAR: {drowsiness.eyeAspectRatio.toFixed(3)}</span>\n                      <span> {drowsiness.blinkFrequency}</span>\n                    </div>\n                  </div>\n                )}\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Rear Camera - Hazards */}\n          <Card>\n            <CardHeader className=\"pb-4\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-2\">\n                  <AlertTriangle className=\"h-5 w-5 text-warning\" />\n                  <div>\n                    <CardTitle>Rear Camera</CardTitle>\n                    <CardDescription>Road Hazard Detection</CardDescription>\n                  </div>\n                </div>\n                <Button onClick={toggleRearCamera} variant={rearCameraActive ? \"destructive\" : \"outline\"} size=\"sm\">\n                  {rearCameraActive ? <VideoOff className=\"h-4 w-4\" /> : <Camera className=\"h-4 w-4\" />}\n                </Button>\n              </div>\n            </CardHeader>\n            <CardContent className=\"p-0\">\n              <div className=\"relative aspect-video bg-secondary/30\">\n                <video ref={rearVideoRef} autoPlay playsInline muted className=\"w-full h-full object-cover\" />\n                <canvas ref={rearCanvasRef} className=\"absolute inset-0 w-full h-full pointer-events-none\" />\n\n                {!rearCameraActive && (\n                  <div className=\"absolute inset-0 flex items-center justify-center\">\n                    <div className=\"text-center\">\n                      <Camera className=\"h-12 w-12 text-muted-foreground/30 mx-auto mb-2\" />\n                      <p className=\"text-sm text-muted-foreground\">Rear camera for hazard detection</p>\n                    </div>\n                  </div>\n                )}\n\n                {/* Hazard Overlay */}\n                {rearCameraActive && hazards.length > 0 && (\n                  <div className=\"absolute top-4 right-4\">\n                    <Badge variant=\"destructive\" className=\"animate-pulse\">\n                      {hazards.length} Hazard{hazards.length > 1 ? \"s\" : \"\"} Detected\n                    </Badge>\n                  </div>\n                )}\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Bottom Row */}\n        <div className=\"grid lg:grid-cols-3 gap-6 mt-6\">\n          {/* Risk Meter */}\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Gauge className=\"h-5 w-5\" />\n                Unified Risk Meter\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-4\">\n                <div className=\"relative h-32 flex items-end justify-center\">\n                  <div className=\"absolute inset-0 flex items-center justify-center\">\n                    <div className={`text-5xl font-bold ${getStatusColor(riskAssessment.overallStatus)}`}>\n                      {riskAssessment.riskScore}%\n                    </div>\n                  </div>\n                </div>\n                <div className=\"h-4 rounded-full bg-gradient-to-r from-success via-warning to-destructive overflow-hidden\">\n                  <motion.div\n                    className=\"h-full bg-foreground/20\"\n                    style={{ marginLeft: `${riskAssessment.riskScore}%` }}\n                    animate={{ marginLeft: `${riskAssessment.riskScore}%` }}\n                  />\n                </div>\n                <div className=\"flex justify-between text-xs text-muted-foreground\">\n                  <span>Safe</span>\n                  <span>Caution</span>\n                  <span>High Risk</span>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Current Detections */}\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <AlertTriangle className=\"h-5 w-5\" />\n                Active Hazards\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              {hazards.length === 0 ? (\n                <div className=\"text-center py-8 text-muted-foreground\">\n                  <Shield className=\"h-8 w-8 mx-auto mb-2 opacity-30\" />\n                  <p className=\"text-sm\">No hazards detected</p>\n                </div>\n              ) : (\n                <div className=\"space-y-2\">\n                  {hazards.map((hazard) => (\n                    <div key={hazard.id} className=\"p-3 rounded-lg bg-warning/10 border border-warning/20\">\n                      <div className=\"flex items-center justify-between\">\n                        <span className=\"font-medium\">{hazardLabels[hazard.objectClass] || hazard.objectClass}</span>\n                        <Badge\n                          variant={hazard.severity === \"critical\" ? \"destructive\" : \"secondary\"}\n                          className=\"text-xs\"\n                        >\n                          {hazard.severity}\n                        </Badge>\n                      </div>\n                      <div className=\"text-sm text-muted-foreground mt-1\">\n                        Confidence: {Math.round(hazard.confidence * 100)}%\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </CardContent>\n          </Card>\n\n          {/* Settings & Alert History */}\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Bell className=\"h-5 w-5\" />\n                Settings & Alerts\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"flex items-center justify-between mb-4\">\n                <div className=\"flex items-center gap-2\">\n                  {soundEnabled ? <Volume2 className=\"h-4 w-4\" /> : <VolumeX className=\"h-4 w-4\" />}\n                  <Label htmlFor=\"sound\">Alert Sound</Label>\n                </div>\n                <Switch id=\"sound\" checked={soundEnabled} onCheckedChange={setSoundEnabled} />\n              </div>\n\n              <div className=\"space-y-4\">\n                <div className=\"grid gap-2\">\n                  <Label htmlFor=\"emergency\" className=\"flex items-center gap-2\">\n                    <Bell className=\"h-4 w-4\" />\n                    Emergency Contact Email\n                  </Label>\n                  <div className=\"flex gap-2\">\n                    <Input\n                      id=\"emergency\"\n                      type=\"email\"\n                      placeholder=\"emergency@example.com\"\n                      value={emergencyContact}\n                      onChange={(e) => setEmergencyContact(e.target.value)}\n                    />\n                    <Button\n                      variant=\"outline\"\n                      onClick={handleSaveContact}\n                    >\n                      Save\n                    </Button>\n                  </div>\n                  <p className=\"text-xs text-muted-foreground\">\n                    Alerts from Critical Hazards or Drowsiness will prompt an email draft.\n                  </p>\n                </div>\n              </div>\n\n              {alertHistory.length > 0 && (\n                <div className=\"pt-4 border-t border-border\">\n                  <div className=\"text-sm font-medium mb-2\">Recent Alerts</div>\n                  <div className=\"space-y-1 max-h-32 overflow-y-auto\">\n                    {alertHistory.slice(-5).map((alert, i) => (\n                      <div key={i} className=\"text-xs text-muted-foreground flex justify-between\">\n                        <span className=\"truncate flex-1 mr-2\">{alert.message}</span>\n                        <span className=\"whitespace-nowrap\">{alert.time.toLocaleTimeString()}</span>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </div>\n      </main>\n    </div>\n  )\n}\n","import { createClient } from \"./client\"\r\nimport type { HazardDetection } from \"@/lib/types\"\r\n\r\nconst supabase = createClient()\r\n\r\nasync function getUserId(): Promise<string | null> {\r\n  const { data, error } = await supabase.auth.getUser()\r\n  if (error) {\r\n    console.error(\"Supabase getUser error\", error)\r\n    return null\r\n  }\r\n  return data.user?.id ?? null\r\n}\r\n\r\nexport async function logDrowsinessEvent(args: {\r\n  alertnessScore: number\r\n  ear: number\r\n  blinkFrequency: number\r\n  triggeredAlert: boolean\r\n  sessionId: string | null\r\n}) {\r\n  const userId = await getUserId()\r\n  if (!userId) return\r\n\r\n  const { error } = await supabase.from(\"drowsiness_events\").insert({\r\n    user_id: userId,\r\n    organization_id: null,\r\n    alertness_score: args.alertnessScore,\r\n    eye_aspect_ratio: args.ear,\r\n    blink_frequency: args.blinkFrequency,\r\n    triggered_alert: args.triggeredAlert,\r\n    alert_type: null,\r\n    emergency_contact: null,\r\n    session_id: args.sessionId,\r\n  })\r\n\r\n  if (error) console.error(\"logDrowsinessEvent error\", error)\r\n}\r\n\r\nexport async function logHazardEvents(hazards: HazardDetection[], sessionId: string | null) {\r\n  if (!hazards.length) return\r\n\r\n  const userId = await getUserId()\r\n  if (!userId) return\r\n\r\n  const rows = hazards.map((h) => ({\r\n    user_id: userId,\r\n    organization_id: null,\r\n    object_class: h.objectClass,\r\n    confidence: h.confidence,\r\n    severity_level: h.severity,\r\n    bbox: h.bbox,\r\n    frame_source: \"webcam\",\r\n    frame_url: null,\r\n    location_lat: null,\r\n    location_lng: null,\r\n    highway_name: null,\r\n    session_id: sessionId,\r\n  }))\r\n\r\n  const { error } = await supabase.from(\"hazard_detections\").insert(rows)\r\n  if (error) console.error(\"logHazardEvents error\", error)\r\n}\r\n\r\n// ---------------- VASE session lifecycle ----------------\r\n\r\nexport async function startVaseSession(): Promise<string | null> {\r\n  const userId = await getUserId()\r\n  if (!userId) return null\r\n\r\n  const { data, error } = await supabase\r\n    .from(\"vase_sessions\")\r\n    .insert({\r\n      user_id: userId,\r\n      organization_id: null,\r\n      start_time: new Date().toISOString(),\r\n      total_alerts: 0,\r\n      hazards_detected: 0,\r\n      emergency_contact_notified: false,\r\n    })\r\n    .select(\"id\")\r\n    .single()\r\n\r\n  if (error) {\r\n    console.error(\"startVaseSession error\", error)\r\n    return null\r\n  }\r\n\r\n  return data?.id ?? null\r\n}\r\n\r\nexport async function endVaseSession(args: {\r\n  sessionId: string\r\n  startTime: Date | null\r\n  totalAlerts: number\r\n  averageAlertness: number | null\r\n  hazardsDetected: number\r\n  emergencyContactNotified: boolean\r\n}) {\r\n  if (!args.sessionId) return\r\n\r\n  const end = new Date()\r\n  const durationSeconds = args.startTime ? Math.round((end.getTime() - args.startTime.getTime()) / 1000) : null\r\n\r\n  const { error } = await supabase\r\n    .from(\"vase_sessions\")\r\n    .update({\r\n      end_time: end.toISOString(),\r\n      duration_seconds: durationSeconds,\r\n      total_alerts: args.totalAlerts,\r\n      average_alertness: args.averageAlertness,\r\n      hazards_detected: args.hazardsDetected,\r\n      emergency_contact_notified: args.emergencyContactNotified,\r\n    })\r\n    .eq(\"id\", args.sessionId)\r\n\r\n  if (error) console.error(\"endVaseSession error\", error)\r\n}\r\n\r\n// Log a high-level VASE alert into the alerts table so it appears in Recent Alerts.\r\nexport async function logVaseAlert(args: {\r\n  sessionId: string | null\r\n  severity: \"critical\" | \"high\" | \"medium\" | \"low\"\r\n  title: string\r\n  description: string | null\r\n}) {\r\n  try {\r\n    if (!supabase) {\r\n      console.warn('Supabase client not initialized');\r\n      return;\r\n    }\r\n\r\n    // Only log in production or if explicitly enabled in development\r\n    if (process.env.NODE_ENV === 'development' && !process.env.NEXT_PUBLIC_ENABLE_ANALYTICS_LOGGING) {\r\n      console.log('VASE Alert (not logged in development):', args.title);\r\n      return;\r\n    }\r\n\r\n    const { error } = await supabase\r\n      .from(\"alerts\")\r\n      .insert({\r\n        detection_id: null,\r\n        camera_id: null,\r\n        organization_id: null,\r\n        severity: args.severity,\r\n        status: \"active\",\r\n        title: args.title,\r\n        description: args.description,\r\n        session_id: args.sessionId,\r\n        created_at: new Date().toISOString()\r\n      });\r\n\r\n    if (error) {\r\n      console.error('Failed to log VASE alert:', {\r\n        error,\r\n        alertData: args,\r\n        timestamp: new Date().toISOString()\r\n      });\r\n    } else {\r\n      console.log('VASE alert logged successfully:', args.title);\r\n    }\r\n  } catch (err) {\r\n    console.error('Unexpected error in logVaseAlert:', {\r\n      error: err,\r\n      alertData: args,\r\n      timestamp: new Date().toISOString()\r\n    });\r\n  }\r\n}\r\n\r\n\r\n// ---------------- Emergency Contact Persistence ----------------\r\n\r\nexport async function saveEmergencyContact(email: string) {\r\n  const userId = await getUserId();\r\n  if (!userId) {\r\n    console.warn(\"Cannot save contact: No user logged in\");\r\n    return null;\r\n  }\r\n\r\n  // Upsert into emergency_contacts table\r\n  // Assuming table structure matches interface roughly or user provided it\r\n  // We try to update if exists for this user, or insert.\r\n  // Since we don't have exact PK knowledge, we assume user_id is unique or we use a query to find existing.\r\n\r\n  // Strategy: Delete old, Insert new (simplest for single contact enforcement)\r\n  // Or better: UPSERT based on user_id if that's a constraint.\r\n\r\n  // Let's try explicit upsert logic if we had a constraint, but here we'll just try to INSERT and handle error?\r\n  // User said \"hook it wuth supabase databse we are using before\".\r\n\r\n  // We will look for an existing contact first.\r\n  const { data: existing } = await supabase\r\n    .from(\"emergency_contacts\")\r\n    .select(\"id\")\r\n    .eq(\"user_id\", userId)\r\n    .limit(1)\r\n    .single();\r\n\r\n  let error;\r\n\r\n  if (existing) {\r\n    const res = await supabase\r\n      .from(\"emergency_contacts\")\r\n      .update({\r\n        name: \"VASE Emergency Contact\",\r\n        phone: email, // MAPPING EMAIL TO PHONE COLUMN (Schema adaptation)\r\n        updated_at: new Date().toISOString()\r\n      })\r\n      .eq(\"id\", existing.id);\r\n    error = res.error;\r\n  } else {\r\n    const res = await supabase\r\n      .from(\"emergency_contacts\")\r\n      .insert({\r\n        user_id: userId,\r\n        name: \"VASE Emergency Contact\",\r\n        phone: email, // MAPPING EMAIL TO PHONE COLUMN\r\n        is_primary: true,\r\n        notify_on_hazard: true,\r\n        notify_on_drowsiness: true\r\n      });\r\n    error = res.error;\r\n  }\r\n\r\n  if (error) {\r\n    console.error(\"saveEmergencyContact error details:\", JSON.stringify(error, null, 2));\r\n    throw new Error(`Supabase Error: ${error.message || JSON.stringify(error)}`);\r\n  }\r\n  return true;\r\n}\r\n\r\nexport async function getEmergencyContact() {\r\n  const userId = await getUserId();\r\n  if (!userId) return null;\r\n\r\n  const { data, error } = await supabase\r\n    .from(\"emergency_contacts\")\r\n    .select(\"*\")\r\n    .eq(\"user_id\", userId)\r\n    .limit(1)\r\n    .single();\r\n\r\n  if (error) {\r\n    // Ignore \"Row not found\" errors\r\n    if (error.code !== 'PGRST116') {\r\n      console.error(\"getEmergencyContact error\", error);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  // Retrieve email from phone column\r\n  return (data as any).phone || null;\r\n}\r\n","import { useEffect, useState } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { AlertTriangle } from 'lucide-react';\n\ntype AlertType = 'hazard' | 'drowsiness' | null;\n\ninterface AlertNotificationProps {\n  type: AlertType;\n  message: string;\n  onClose: () => void;\n}\n\nexport function AlertNotification({ type, message, onClose }: AlertNotificationProps) {\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      onClose();\n    }, 5000); // Auto-close after 5 seconds\n\n    return () => clearTimeout(timer);\n  }, [onClose]);\n\n  if (!type) return null;\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        initial={{ x: '100%', opacity: 0 }}\n        animate={{ x: 0, opacity: 1 }}\n        exit={{ x: '100%', opacity: 0 }}\n        transition={{ type: 'spring', damping: 25, stiffness: 300 }}\n        className=\"fixed bottom-6 right-6 z-50 max-w-sm w-full bg-red-600 text-white p-4 rounded-lg shadow-lg flex items-start space-x-3\"\n      >\n        <AlertTriangle className=\"h-6 w-6 text-white flex-shrink-0 mt-0.5\" />\n        <div className=\"flex-1\">\n          <h3 className=\"font-medium\">\n            {type === 'hazard' ? 'Hazard Detected!' : 'Drowsiness Detected!'}\n          </h3>\n          <p className=\"text-sm opacity-90\">{message}</p>\n        </div>\n        <button\n          onClick={onClose}\n          className=\"text-white opacity-70 hover:opacity-100 transition-opacity\"\n          aria-label=\"Close alert\"\n        >\n          ✕\n        </button>\n      </motion.div>\n    </AnimatePresence>\n  );\n}\n","'use client'\n\nimport * as React from 'react'\nimport * as DialogPrimitive from '@radix-ui/react-dialog'\nimport { XIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Dialog({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Root>) {\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />\n}\n\nfunction DialogTrigger({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />\n}\n\nfunction DialogPortal({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Portal>) {\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />\n}\n\nfunction DialogClose({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Close>) {\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />\n}\n\nfunction DialogOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {\n  return (\n    <DialogPrimitive.Overlay\n      data-slot=\"dialog-overlay\"\n      className={cn(\n        'data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogContent({\n  className,\n  children,\n  showCloseButton = true,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Content> & {\n  showCloseButton?: boolean\n}) {\n  return (\n    <DialogPortal data-slot=\"dialog-portal\">\n      <DialogOverlay />\n      <DialogPrimitive.Content\n        data-slot=\"dialog-content\"\n        className={cn(\n          'bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg',\n          className,\n        )}\n        {...props}\n      >\n        {children}\n        {showCloseButton && (\n          <DialogPrimitive.Close\n            data-slot=\"dialog-close\"\n            className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\"\n          >\n            <XIcon />\n            <span className=\"sr-only\">Close</span>\n          </DialogPrimitive.Close>\n        )}\n      </DialogPrimitive.Content>\n    </DialogPortal>\n  )\n}\n\nfunction DialogHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"dialog-header\"\n      className={cn('flex flex-col gap-2 text-center sm:text-left', className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"dialog-footer\"\n      className={cn(\n        'flex flex-col-reverse gap-2 sm:flex-row sm:justify-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Title>) {\n  return (\n    <DialogPrimitive.Title\n      data-slot=\"dialog-title\"\n      className={cn('text-lg leading-none font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Description>) {\n  return (\n    <DialogPrimitive.Description\n      data-slot=\"dialog-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n}\n"],"names":[],"mappings":"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"}