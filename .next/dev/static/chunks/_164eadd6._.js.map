{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Vision-AI/lib/models.ts"],"sourcesContent":["// lib/models.ts\r\n// Client-safe lazy loading of TFJS models for Vision-AI (VASE).\r\nimport * as tf from \"@tensorflow/tfjs\"\r\nlet objectDetector: any | null = null\r\nlet faceModel: any | null = null\r\nlet modelsLoaded = false\r\nlet loadingPromise: Promise<void> | null = null\r\n\r\nexport async function loadModels() {\r\n  if (modelsLoaded) return\r\n  if (typeof window === \"undefined\") return\r\n  if (loadingPromise) return loadingPromise\r\n\r\n  loadingPromise = (async () => {\r\n    try {\r\n      const tf = await import(\"@tensorflow/tfjs\")\r\n      await import(\"@tensorflow/tfjs-backend-webgl\")\r\n      const coco = await import(\"@tensorflow-models/coco-ssd\")\r\n\r\n      await tf.ready()\r\n      try {\r\n        if (tf.getBackend() !== \"webgl\") {\r\n          await tf.setBackend(\"webgl\")\r\n        }\r\n      } catch {\r\n        // fall back to CPU if WebGL not available\r\n      }\r\n\r\n      objectDetector = await coco.load({ base: \"lite_mobilenet_v2\" })\r\n\r\n      modelsLoaded = true\r\n      console.log(\"TFJS object detection model loaded\")\r\n    } catch (err) {\r\n      console.error(\"Error loading TFJS models\", err)\r\n      modelsLoaded = false\r\n    }\r\n  })()\r\n\r\n  return loadingPromise\r\n}\r\n\r\nexport function getObjectDetector() {\r\n  return objectDetector\r\n}\r\n\r\nexport function getFaceDetector() {\r\n  return faceModel\r\n}\r\n\r\nexport function areModelsLoaded() {\r\n  return modelsLoaded\r\n}\r\n\r\n// Lazily load BlazeFace only when drowsiness detection is needed.\r\nlet faceLoadingPromise: Promise<void> | null = null\r\n\r\nexport async function ensureFaceModelLoaded() {\r\n  if (faceModel) return\r\n  if (typeof window === \"undefined\") return\r\n  if (faceLoadingPromise) return faceLoadingPromise\r\n\r\n  faceLoadingPromise = (async () => {\r\n    try {\r\n      faceModel = await tf.loadGraphModel(\r\n        \"/models/blazeface/model.json\",\r\n        { fromTFHub: false }\r\n      )\r\n      \r\n      console.log(\"BlazeFace model loaded (self-hosted)\")\r\n    } catch (err) {\r\n      console.warn(\"BlazeFace model could not be loaded; drowsiness detection will be disabled.\")\r\n      faceModel = null\r\n    }\r\n  })()\r\n\r\n  return faceLoadingPromise\r\n}\r\n"],"names":[],"mappings":"AAAA,gBAAgB;AAChB,gEAAgE;;;;;;;;;;;;;AAChE;AAAA;;AACA,IAAI,iBAA6B;AACjC,IAAI,YAAwB;AAC5B,IAAI,eAAe;AACnB,IAAI,iBAAuC;AAEpC,eAAe;IACpB,IAAI,cAAc;IAClB;;IACA,IAAI,gBAAgB,OAAO;IAE3B,iBAAiB,CAAC;QAChB,IAAI;YACF,MAAM,KAAK;YACX;YACA,MAAM,OAAO;YAEb,MAAM,GAAG,KAAK;YACd,IAAI;gBACF,IAAI,GAAG,UAAU,OAAO,SAAS;oBAC/B,MAAM,GAAG,UAAU,CAAC;gBACtB;YACF,EAAE,OAAM;YACN,0CAA0C;YAC5C;YAEA,iBAAiB,MAAM,KAAK,IAAI,CAAC;gBAAE,MAAM;YAAoB;YAE7D,eAAe;YACf,QAAQ,GAAG,CAAC;QACd,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,6BAA6B;YAC3C,eAAe;QACjB;IACF,CAAC;IAED,OAAO;AACT;AAEO,SAAS;IACd,OAAO;AACT;AAEO,SAAS;IACd,OAAO;AACT;AAEO,SAAS;IACd,OAAO;AACT;AAEA,kEAAkE;AAClE,IAAI,qBAA2C;AAExC,eAAe;IACpB,IAAI,WAAW;IACf;;IACA,IAAI,oBAAoB,OAAO;IAE/B,qBAAqB,CAAC;QACpB,IAAI;YACF,YAAY,MAAM,uLAAiB,CACjC,gCACA;gBAAE,WAAW;YAAM;YAGrB,QAAQ,GAAG,CAAC;QACd,EAAE,OAAO,KAAK;YACZ,QAAQ,IAAI,CAAC;YACb,YAAY;QACd;IACF,CAAC;IAED,OAAO;AACT"}},
    {"offset": {"line": 91, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Vision-AI/lib/dvse/engine.ts"],"sourcesContent":["// Vision-AI Safety Engine (VASE) - Core Engine Logic\n\nimport type { DVSERiskAssessment, DrowsinessMetrics, HazardDetection, SafetyStatus, AlertnessWindow } from \"@/lib/types\"\n\n// Configuration constants\nconst CONFIG = {\n  ALERTNESS_THRESHOLD: 50, // Below this triggers alert\n  HAZARD_CONFIDENCE_THRESHOLD: 0.5, // Minimum confidence for hazard alerts\n  RISK_WEIGHTS: {\n    drowsiness: 0.6, // Drowsiness contributes 60% to risk\n    hazard: 0.4, // Hazard contributes 40% to risk\n  },\n  ALERTNESS_WINDOW_SIZE: 20, // Rolling window for smoothing (10 seconds at 2 fps)\n  CRITICAL_HAZARDS: [\"cow\", \"buffalo\", \"elephant\", \"wrong_way_vehicle\", \"pedestrian\", \"broken_vehicle\"],\n  HIGH_RISK_THRESHOLD: 70,\n  CAUTION_THRESHOLD: 40,\n}\n\n// Create rolling window for smoothed alertness\nexport function createAlertnessWindow(size: number = CONFIG.ALERTNESS_WINDOW_SIZE): AlertnessWindow {\n  return {\n    samples: [],\n    windowSize: size,\n    average: 100, // Start optimistic\n  }\n}\n\n// Update rolling window with new alertness sample\nexport function updateAlertnessWindow(window: AlertnessWindow, newSample: number): AlertnessWindow {\n  const newSamples = [...window.samples, newSample]\n  if (newSamples.length > window.windowSize) {\n    newSamples.shift()\n  }\n  const average = newSamples.reduce((a, b) => a + b, 0) / newSamples.length\n  return {\n    ...window,\n    samples: newSamples,\n    average,\n  }\n}\n\n// Calculate Eye Aspect Ratio (EAR) from landmarks\nexport function calculateEAR(eyePoints: { x: number; y: number }[]): number {\n  if (eyePoints.length < 6) return 0.3 // Default open\n\n  // Vertical distances\n  const v1 = Math.sqrt(Math.pow(eyePoints[1].x - eyePoints[5].x, 2) + Math.pow(eyePoints[1].y - eyePoints[5].y, 2))\n  const v2 = Math.sqrt(Math.pow(eyePoints[2].x - eyePoints[4].x, 2) + Math.pow(eyePoints[2].y - eyePoints[4].y, 2))\n\n  // Horizontal distance\n  const h = Math.sqrt(Math.pow(eyePoints[0].x - eyePoints[3].x, 2) + Math.pow(eyePoints[0].y - eyePoints[3].y, 2))\n\n  if (h === 0) return 0.3\n  return (v1 + v2) / (2.0 * h)\n}\n\n// Convert EAR to alertness score (0-100)\nexport function earToAlertness(ear: number): number {\n  // EAR typically ranges from 0.15 (closed) to 0.35 (open)\n  const minEAR = 0.15\n  const maxEAR = 0.35\n  const normalized = Math.max(0, Math.min(1, (ear - minEAR) / (maxEAR - minEAR)))\n  return Math.round(normalized * 100)\n}\n\n// Get hazard severity based on class and confidence\nexport function getHazardSeverity(objectClass: string, confidence: number): \"critical\" | \"high\" | \"medium\" | \"low\" {\n  const isCriticalClass = CONFIG.CRITICAL_HAZARDS.includes(objectClass)\n\n  if (isCriticalClass && confidence > 0.8) return \"critical\"\n  if (isCriticalClass && confidence > 0.6) return \"high\"\n  if (confidence > 0.8) return \"high\"\n  if (confidence > 0.6) return \"medium\"\n  return \"low\"\n}\n\n// Calculate hazard risk score from detections\nexport function calculateHazardRisk(hazards: HazardDetection[]): number {\n  if (hazards.length === 0) return 0\n\n  let maxRisk = 0\n  for (const hazard of hazards) {\n    let risk = hazard.confidence * 100\n\n    // Boost risk for critical hazards\n    if (CONFIG.CRITICAL_HAZARDS.includes(hazard.objectClass)) {\n      risk = Math.min(100, risk * 1.3)\n    }\n\n    // Severity multiplier\n    const severityMultiplier = {\n      critical: 1.0,\n      high: 0.8,\n      medium: 0.5,\n      low: 0.3,\n    }\n    risk *= severityMultiplier[hazard.severity]\n\n    maxRisk = Math.max(maxRisk, risk)\n  }\n\n  return Math.round(maxRisk)\n}\n\n// Main VASE risk assessment function\nexport function assessRisk(\n  drowsiness: DrowsinessMetrics | null,\n  hazards: HazardDetection[],\n  smoothedAlertness: number,\n): DVSERiskAssessment {\n  // Calculate individual risks\n  const alertnessRisk = drowsiness ? Math.max(0, 100 - smoothedAlertness) : 0\n  const hazardRisk = calculateHazardRisk(hazards)\n\n  // Combined risk score (weighted)\n  const riskScore = Math.round(alertnessRisk * CONFIG.RISK_WEIGHTS.drowsiness + hazardRisk * CONFIG.RISK_WEIGHTS.hazard)\n\n  // Determine overall status\n  let overallStatus: SafetyStatus = \"safe\"\n  if (riskScore >= CONFIG.HIGH_RISK_THRESHOLD) {\n    overallStatus = \"high-risk\"\n  } else if (riskScore >= CONFIG.CAUTION_THRESHOLD) {\n    overallStatus = \"caution\"\n  }\n\n  // Determine if alert should trigger\n  const shouldAlert =\n    smoothedAlertness < CONFIG.ALERTNESS_THRESHOLD ||\n    hazards.some((h) => h.severity === \"critical\" || h.severity === \"high\")\n\n  // Generate alert message\n  let alertMessage: string | null = null\n  if (shouldAlert) {\n    if (smoothedAlertness < CONFIG.ALERTNESS_THRESHOLD && hazards.length > 0) {\n      alertMessage = `DANGER: Drowsy driving detected + ${hazards[0].objectClass} on road!`\n    } else if (smoothedAlertness < CONFIG.ALERTNESS_THRESHOLD) {\n      alertMessage = \"ALERT: Drowsiness detected - Please take a break!\"\n    } else if (hazards.length > 0) {\n      const criticalHazard = hazards.find((h) => h.severity === \"critical\")\n      if (criticalHazard) {\n        alertMessage = `DANGER: ${criticalHazard.objectClass.replace(\"_\", \" \")} detected ahead!`\n      } else {\n        alertMessage = `WARNING: ${hazards[0].objectClass.replace(\"_\", \" \")} detected on road`\n      }\n    }\n  }\n\n  return {\n    overallStatus,\n    riskScore,\n    alertnessRisk,\n    hazardRisk,\n    timestamp: Date.now(),\n    shouldAlert,\n    alertMessage,\n  }\n}\n\n// Get status color for UI\nexport function getStatusColor(status: SafetyStatus): string {\n  switch (status) {\n    case \"safe\":\n      return \"text-success\"\n    case \"caution\":\n      return \"text-warning\"\n    case \"high-risk\":\n      return \"text-destructive\"\n  }\n}\n\nexport function getStatusBgColor(status: SafetyStatus): string {\n  switch (status) {\n    case \"safe\":\n      return \"bg-success\"\n    case \"caution\":\n      return \"bg-warning\"\n    case \"high-risk\":\n      return \"bg-destructive\"\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 269, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Vision-AI/lib/detection.ts"],"sourcesContent":["import { getFaceDetector, getObjectDetector, loadModels, ensureFaceModelLoaded } from \"./models\"\r\nimport type { DrowsinessMetrics, HazardDetection, HazardObjectClass, BoundingBox } from \"@/lib/types\"\r\nimport { earToAlertness } from \"@/lib/dvse/engine\"\r\n\r\nexport async function runRealDrowsinessDetection(\r\n  videoEl: HTMLVideoElement | null,\r\n): Promise<DrowsinessMetrics | null> {\r\n  if (!videoEl) return null\r\n\r\n  try {\r\n    await ensureFaceModelLoaded()\r\n    const faceModel = getFaceDetector()\r\n    if (!faceModel) return null\r\n\r\n    const predictions = await faceModel.estimateFaces(videoEl, false)\r\n    if (!predictions.length) return null\r\n\r\n    const face = predictions[0]\r\n\r\n    // BlazeFace key landmarks\r\n    // [leftEye, rightEye, nose, mouth, leftEar, rightEar]\r\n    const landmarks = face.landmarks\r\n\r\n    if (!landmarks || landmarks.length < 6) return null\r\n\r\n    const leftEye = landmarks[0]\r\n    const rightEye = landmarks[1]\r\n\r\n    // Approximate EAR from inter-eye distance and face geometry.\r\n    const eyeDistance = Math.hypot(leftEye[0] - rightEye[0], leftEye[1] - rightEye[1])\r\n    const faceHeight = face.bottomRight[1] - face.topLeft[1]\r\n\r\n    let ear = 0.28\r\n    if (eyeDistance > 0 && faceHeight > 0) {\r\n      const ratio = faceHeight / eyeDistance\r\n      ear = 0.35 - Math.min(Math.max(ratio - 2.0, 0), 1.0) * 0.2\r\n      ear = Math.max(0.15, Math.min(0.35, ear))\r\n    }\r\n\r\n    const alertnessScore = earToAlertness(ear)\r\n\r\n    const metrics: DrowsinessMetrics = {\r\n      alertnessScore,\r\n      eyeAspectRatio: ear,\r\n      blinkCount: 0,\r\n      blinkFrequency: 0,\r\n      isAlert: alertnessScore >= 50,\r\n      headTilt: null,\r\n      lookingAway: false,\r\n      yawning: false,\r\n      lastUpdated: Date.now(),\r\n    }\r\n\r\n    return metrics\r\n  } catch (err) {\r\n    console.warn(\"BlazeFace detection failed; returning null metrics.\")\r\n    return null\r\n  }\r\n}\r\n\r\n// ---------------- Hazard detection (rear camera) ----------------\r\n\r\nconst HAZARD_MIN_CONFIDENCE = 0.5\r\n\r\nconst COCO_TO_HAZARD_CLASS: Record<string, HazardObjectClass> = {\r\n  person: \"pedestrian\",\r\n  dog: \"dog\",\r\n  cow: \"cow\",\r\n  car: \"wrong_way_vehicle\",\r\n  truck: \"wrong_way_vehicle\",\r\n  bus: \"wrong_way_vehicle\",\r\n  motorcycle: \"wrong_way_vehicle\",\r\n  bicycle: \"cyclist\",\r\n  bench: \"road_barrier\",\r\n  chair: \"road_barrier\",\r\n}\r\n\r\nfunction normalizeBBox(\r\n  bboxPixels: [number, number, number, number],\r\n  frameWidth: number,\r\n  frameHeight: number,\r\n): BoundingBox {\r\n  const [x, y, w, h] = bboxPixels\r\n  if (!frameWidth || !frameHeight) {\r\n    return { x: 0, y: 0, width: 0, height: 0 }\r\n  }\r\n  return {\r\n    x: x / frameWidth,\r\n    y: y / frameHeight,\r\n    width: w / frameWidth,\r\n    height: h / frameHeight,\r\n  }\r\n}\r\n\r\nfunction mapToHazardClass(cls: string): HazardObjectClass {\r\n  return COCO_TO_HAZARD_CLASS[cls] ?? \"other\"\r\n}\r\n\r\nexport async function runRealHazardDetection(\r\n  videoEl: HTMLVideoElement | null,\r\n): Promise<HazardDetection[]> {\r\n  if (!videoEl) return []\r\n\r\n  if (typeof window === \"undefined\") return []\r\n  await loadModels()\r\n\r\n  const detector = getObjectDetector()\r\n  if (!detector) return []\r\n\r\n  try {\r\n    const frameWidth = videoEl.videoWidth || 0\r\n    const frameHeight = videoEl.videoHeight || 0\r\n\r\n    // If the video element has not started rendering frames yet, its\r\n    // dimensions will be 0x0, which causes TFJS to throw \"Requested texture size [0x0] is invalid\".\r\n    // In that case, skip detection for this tick.\r\n    if (!frameWidth || !frameHeight) {\r\n      return []\r\n    }\r\n\r\n    const predictions: Array<{\r\n      class: string\r\n      score: number\r\n      bbox: [number, number, number, number]\r\n    }> = await detector.detect(videoEl)\r\n\r\n    const now = Date.now()\r\n    const hazards: HazardDetection[] = []\r\n\r\n    for (let i = 0; i < predictions.length; i++) {\r\n      const p = predictions[i]\r\n      if (!p || p.score < HAZARD_MIN_CONFIDENCE) continue\r\n\r\n      const objectClass = mapToHazardClass(p.class)\r\n      const bbox = normalizeBBox(p.bbox, frameWidth, frameHeight)\r\n\r\n      const severity: HazardDetection[\"severity\"] =\r\n        objectClass === \"cow\" ||\r\n        objectClass === \"buffalo\" ||\r\n        objectClass === \"pedestrian\" ||\r\n        objectClass === \"wrong_way_vehicle\"\r\n          ? p.score > 0.8\r\n            ? \"critical\"\r\n            : \"high\"\r\n          : p.score > 0.8\r\n            ? \"high\"\r\n            : p.score > 0.6\r\n              ? \"medium\"\r\n              : \"low\"\r\n\r\n      hazards.push({\r\n        id: `${now}-${i}`,\r\n        objectClass,\r\n        confidence: p.score,\r\n        severity,\r\n        bbox,\r\n        timestamp: now,\r\n      })\r\n    }\r\n\r\n    return hazards\r\n  } catch (err) {\r\n    console.error(\"runRealHazardDetection error\", err)\r\n    return []\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 402, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Vision-AI/lib/supabase/client.ts"],"sourcesContent":["import { createBrowserClient } from \"@supabase/ssr\"\n\nexport function createClient() {\n  return createBrowserClient(process.env.NEXT_PUBLIC_SUPABASE_URL!, process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!)\n}\n"],"names":[],"mappings":";;;;AAG6B;AAH7B;AAAA;;AAEO,SAAS;IACd,OAAO,IAAA,oMAAmB;AAC5B"}},
    {"offset": {"line": 420, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Vision-AI/lib/supabase/analytics.ts"],"sourcesContent":["import { createClient } from \"./client\"\r\nimport type { HazardDetection } from \"@/lib/types\"\r\n\r\nconst supabase = createClient()\r\n\r\nasync function getUserId(): Promise<string | null> {\r\n  const { data, error } = await supabase.auth.getUser()\r\n  if (error) {\r\n    console.error(\"Supabase getUser error\", error)\r\n    return null\r\n  }\r\n  return data.user?.id ?? null\r\n}\r\n\r\nexport async function logDrowsinessEvent(args: {\r\n  alertnessScore: number\r\n  ear: number\r\n  blinkFrequency: number\r\n  triggeredAlert: boolean\r\n  sessionId: string | null\r\n}) {\r\n  const userId = await getUserId()\r\n  if (!userId) return\r\n\r\n  const { error } = await supabase.from(\"drowsiness_events\").insert({\r\n    user_id: userId,\r\n    organization_id: null,\r\n    alertness_score: args.alertnessScore,\r\n    eye_aspect_ratio: args.ear,\r\n    blink_frequency: args.blinkFrequency,\r\n    triggered_alert: args.triggeredAlert,\r\n    alert_type: null,\r\n    emergency_contact: null,\r\n    session_id: args.sessionId,\r\n  })\r\n\r\n  if (error) console.error(\"logDrowsinessEvent error\", error)\r\n}\r\n\r\nexport async function logHazardEvents(hazards: HazardDetection[], sessionId: string | null) {\r\n  if (!hazards.length) return\r\n\r\n  const userId = await getUserId()\r\n  if (!userId) return\r\n\r\n  const rows = hazards.map((h) => ({\r\n    user_id: userId,\r\n    organization_id: null,\r\n    object_class: h.objectClass,\r\n    confidence: h.confidence,\r\n    severity_level: h.severity,\r\n    bbox: h.bbox,\r\n    frame_source: \"webcam\",\r\n    frame_url: null,\r\n    location_lat: null,\r\n    location_lng: null,\r\n    highway_name: null,\r\n    session_id: sessionId,\r\n  }))\r\n\r\n  const { error } = await supabase.from(\"hazard_detections\").insert(rows)\r\n  if (error) console.error(\"logHazardEvents error\", error)\r\n}\r\n\r\n// ---------------- VASE session lifecycle ----------------\r\n\r\nexport async function startVaseSession(): Promise<string | null> {\r\n  const userId = await getUserId()\r\n  if (!userId) return null\r\n\r\n  const { data, error } = await supabase\r\n    .from(\"vase_sessions\")\r\n    .insert({\r\n      user_id: userId,\r\n      organization_id: null,\r\n      start_time: new Date().toISOString(),\r\n      total_alerts: 0,\r\n      hazards_detected: 0,\r\n      emergency_contact_notified: false,\r\n    })\r\n    .select(\"id\")\r\n    .single()\r\n\r\n  if (error) {\r\n    console.error(\"startVaseSession error\", error)\r\n    return null\r\n  }\r\n\r\n  return data?.id ?? null\r\n}\r\n\r\nexport async function endVaseSession(args: {\r\n  sessionId: string\r\n  startTime: Date | null\r\n  totalAlerts: number\r\n  averageAlertness: number | null\r\n  hazardsDetected: number\r\n  emergencyContactNotified: boolean\r\n}) {\r\n  if (!args.sessionId) return\r\n\r\n  const end = new Date()\r\n  const durationSeconds = args.startTime ? Math.round((end.getTime() - args.startTime.getTime()) / 1000) : null\r\n\r\n  const { error } = await supabase\r\n    .from(\"vase_sessions\")\r\n    .update({\r\n      end_time: end.toISOString(),\r\n      duration_seconds: durationSeconds,\r\n      total_alerts: args.totalAlerts,\r\n      average_alertness: args.averageAlertness,\r\n      hazards_detected: args.hazardsDetected,\r\n      emergency_contact_notified: args.emergencyContactNotified,\r\n    })\r\n    .eq(\"id\", args.sessionId)\r\n\r\n  if (error) console.error(\"endVaseSession error\", error)\r\n}\r\n\r\n// Log a high-level VASE alert into the alerts table so it appears in Recent Alerts.\r\nexport async function logVaseAlert(args: {\r\n  sessionId: string | null\r\n  severity: \"critical\" | \"high\" | \"medium\" | \"low\"\r\n  title: string\r\n  description: string | null\r\n}) {\r\n  const { error } = await supabase.from(\"alerts\").insert({\r\n    detection_id: null,\r\n    camera_id: null,\r\n    organization_id: null,\r\n    severity: args.severity,\r\n    status: \"active\",\r\n    title: args.title,\r\n    description: args.description,\r\n  })\r\n\r\n  if (error) console.error(\"logVaseAlert error\", error)\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 530, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Vision-AI/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB"}},
    {"offset": {"line": 548, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Vision-AI/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive:\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost:\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\n        icon: 'size-9',\n        'icon-sm': 'size-8',\n        'icon-lg': 'size-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'button'> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : 'button'\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,0KAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,2KAAI,GAAG;IAE9B,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KAnBS"}},
    {"offset": {"line": 613, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Vision-AI/components/ui/card.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn('leading-none font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn('px-6', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf;MARS"}},
    {"offset": {"line": 733, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Vision-AI/components/ui/switch.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as SwitchPrimitive from '@radix-ui/react-switch'\n\nimport { cn } from '@/lib/utils'\n\nfunction Switch({\n  className,\n  ...props\n}: React.ComponentProps<typeof SwitchPrimitive.Root>) {\n  return (\n    <SwitchPrimitive.Root\n      data-slot=\"switch\"\n      className={cn(\n        'peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50',\n        className,\n      )}\n      {...props}\n    >\n      <SwitchPrimitive.Thumb\n        data-slot=\"switch-thumb\"\n        className={\n          'bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0'\n        }\n      />\n    </SwitchPrimitive.Root>\n  )\n}\n\nexport { Switch }\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,OAAO,EACd,SAAS,EACT,GAAG,OAC+C;IAClD,qBACE,6LAAC,6KAAoB;QACnB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,6WACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,8KAAqB;YACpB,aAAU;YACV,WACE;;;;;;;;;;;AAKV;KArBS"}},
    {"offset": {"line": 774, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Vision-AI/components/ui/label.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as LabelPrimitive from '@radix-ui/react-label'\n\nimport { cn } from '@/lib/utils'\n\nfunction Label({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  return (\n    <LabelPrimitive.Root\n      data-slot=\"label\"\n      className={cn(\n        'flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Label }\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,MAAM,EACb,SAAS,EACT,GAAG,OAC8C;IACjD,qBACE,6LAAC,4KAAmB;QAClB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,uNACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS"}},
    {"offset": {"line": 807, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Vision-AI/components/ui/input.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Input({ className, type, ...props }: React.ComponentProps<'input'>) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        'file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n        'focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]',\n        'aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,6LAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,8bACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS"}},
    {"offset": {"line": 838, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Vision-AI/components/ui/badge.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst badgeVariants = cva(\n  'inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden',\n  {\n    variants: {\n      variant: {\n        default:\n          'border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90',\n        secondary:\n          'border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90',\n        destructive:\n          'border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n    },\n  },\n)\n\nfunction Badge({\n  className,\n  variant,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'span'> &\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : 'span'\n\n  return (\n    <Comp\n      data-slot=\"badge\"\n      className={cn(badgeVariants({ variant }), className)}\n      {...props}\n    />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,IAAA,0KAAG,EACvB,kZACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,EACb,SAAS,EACT,OAAO,EACP,UAAU,KAAK,EACf,GAAG,OAEuD;IAC1D,MAAM,OAAO,UAAU,2KAAI,GAAG;IAE9B,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf;KAhBS"}},
    {"offset": {"line": 890, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Vision-AI/components/ui/progress.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as ProgressPrimitive from '@radix-ui/react-progress'\n\nimport { cn } from '@/lib/utils'\n\nfunction Progress({\n  className,\n  value,\n  ...props\n}: React.ComponentProps<typeof ProgressPrimitive.Root>) {\n  return (\n    <ProgressPrimitive.Root\n      data-slot=\"progress\"\n      className={cn(\n        'bg-primary/20 relative h-2 w-full overflow-hidden rounded-full',\n        className,\n      )}\n      {...props}\n    >\n      <ProgressPrimitive.Indicator\n        data-slot=\"progress-indicator\"\n        className=\"bg-primary h-full w-full flex-1 transition-all\"\n        style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n      />\n    </ProgressPrimitive.Root>\n  )\n}\n\nexport { Progress }\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,SAAS,EAChB,SAAS,EACT,KAAK,EACL,GAAG,OACiD;IACpD,qBACE,6LAAC,+KAAsB;QACrB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,kEACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,oLAA2B;YAC1B,aAAU;YACV,WAAU;YACV,OAAO;gBAAE,WAAW,CAAC,YAAY,EAAE,MAAM,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC;YAAC;;;;;;;;;;;AAIlE;KArBS"}},
    {"offset": {"line": 934, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Vision-AI/components/ui/vision-ai-logo.tsx"],"sourcesContent":["\"use client\"\n\nimport { motion } from \"framer-motion\"\nimport { cn } from \"@/lib/utils\"\n\ninterface VisionAILogoProps {\n  className?: string\n  size?: \"sm\" | \"md\" | \"lg\" | \"xl\"\n  animate?: boolean\n  showText?: boolean\n}\n\nexport function VisionAILogo({ className, size = \"md\", animate = false, showText = true }: VisionAILogoProps) {\n  const sizes = {\n    sm: { icon: 24, text: \"text-lg\" },\n    md: { icon: 32, text: \"text-xl\" },\n    lg: { icon: 48, text: \"text-2xl\" },\n    xl: { icon: 64, text: \"text-3xl\" },\n  }\n\n  const { icon: iconSize, text: textSize } = sizes[size]\n\n  const EyeIcon = (\n    <svg\n      width={iconSize}\n      height={iconSize}\n      viewBox=\"0 0 64 64\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      className=\"relative\"\n    >\n      {/* Outer eye shape */}\n      <motion.path\n        d=\"M32 12C18 12 6 32 6 32C6 32 18 52 32 52C46 52 58 32 58 32C58 32 46 12 32 12Z\"\n        stroke=\"url(#eyeGradient)\"\n        strokeWidth=\"3\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        fill=\"none\"\n        initial={animate ? { pathLength: 0 } : { pathLength: 1 }}\n        animate={{ pathLength: 1 }}\n        transition={{ duration: 1.5, ease: \"easeInOut\" }}\n      />\n      {/* Iris */}\n      <motion.circle\n        cx=\"32\"\n        cy=\"32\"\n        r=\"12\"\n        stroke=\"url(#irisGradient)\"\n        strokeWidth=\"2.5\"\n        fill=\"none\"\n        initial={animate ? { scale: 0 } : { scale: 1 }}\n        animate={{ scale: 1 }}\n        transition={{ duration: 0.5, delay: animate ? 0.8 : 0 }}\n      />\n      {/* Pupil */}\n      <motion.circle\n        cx=\"32\"\n        cy=\"32\"\n        r=\"5\"\n        fill=\"url(#pupilGradient)\"\n        initial={animate ? { scale: 0 } : { scale: 1 }}\n        animate={animate ? { scale: [0, 1.2, 1] } : { scale: 1 }}\n        transition={{ duration: 0.6, delay: animate ? 1 : 0 }}\n      />\n      {/* Light reflection */}\n      <motion.circle\n        cx=\"36\"\n        cy=\"28\"\n        r=\"2\"\n        fill=\"white\"\n        opacity={0.8}\n        initial={animate ? { opacity: 0 } : { opacity: 0.8 }}\n        animate={{ opacity: 0.8 }}\n        transition={{ duration: 0.3, delay: animate ? 1.3 : 0 }}\n      />\n      {/* AI scan lines */}\n      <motion.g\n        initial={animate ? { opacity: 0 } : { opacity: 1 }}\n        animate={{ opacity: 1 }}\n        transition={{ duration: 0.5, delay: animate ? 1.5 : 0 }}\n      >\n        <line x1=\"20\" y1=\"32\" x2=\"26\" y2=\"32\" stroke=\"url(#scanGradient)\" strokeWidth=\"1.5\" opacity=\"0.6\" />\n        <line x1=\"38\" y1=\"32\" x2=\"44\" y2=\"32\" stroke=\"url(#scanGradient)\" strokeWidth=\"1.5\" opacity=\"0.6\" />\n        <line x1=\"32\" y1=\"20\" x2=\"32\" y2=\"26\" stroke=\"url(#scanGradient)\" strokeWidth=\"1.5\" opacity=\"0.6\" />\n        <line x1=\"32\" y1=\"38\" x2=\"32\" y2=\"44\" stroke=\"url(#scanGradient)\" strokeWidth=\"1.5\" opacity=\"0.6\" />\n      </motion.g>\n      <defs>\n        <linearGradient id=\"eyeGradient\" x1=\"6\" y1=\"32\" x2=\"58\" y2=\"32\" gradientUnits=\"userSpaceOnUse\">\n          <stop stopColor=\"#4f46e5\" />\n          <stop offset=\"0.5\" stopColor=\"#06b6d4\" />\n          <stop offset=\"1\" stopColor=\"#22c55e\" />\n        </linearGradient>\n        <linearGradient id=\"irisGradient\" x1=\"20\" y1=\"32\" x2=\"44\" y2=\"32\" gradientUnits=\"userSpaceOnUse\">\n          <stop stopColor=\"#4f46e5\" />\n          <stop offset=\"1\" stopColor=\"#06b6d4\" />\n        </linearGradient>\n        <radialGradient id=\"pupilGradient\" cx=\"32\" cy=\"32\" r=\"5\" gradientUnits=\"userSpaceOnUse\">\n          <stop stopColor=\"#1e1b4b\" />\n          <stop offset=\"1\" stopColor=\"#4f46e5\" />\n        </radialGradient>\n        <linearGradient id=\"scanGradient\" x1=\"0\" y1=\"0\" x2=\"1\" y2=\"0\" gradientUnits=\"objectBoundingBox\">\n          <stop stopColor=\"#22c55e\" />\n          <stop offset=\"1\" stopColor=\"#06b6d4\" />\n        </linearGradient>\n      </defs>\n    </svg>\n  )\n\n  return (\n    <div className={cn(\"flex items-center gap-2\", className)}>\n      <div className=\"relative\">\n        {EyeIcon}\n        {animate && (\n          <motion.div\n            className=\"absolute inset-0 blur-xl bg-primary/30 rounded-full\"\n            initial={{ opacity: 0 }}\n            animate={{ opacity: [0, 0.5, 0.3] }}\n            transition={{ duration: 2, delay: 1 }}\n          />\n        )}\n      </div>\n      {showText && (\n        <motion.span\n          className={cn(\"font-bold tracking-tight\", textSize)}\n          initial={animate ? { opacity: 0, x: -10 } : { opacity: 1 }}\n          animate={{ opacity: 1, x: 0 }}\n          transition={{ duration: 0.5, delay: animate ? 0.5 : 0 }}\n        >\n          Vision-AI\n        </motion.span>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1354, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Vision-AI/app/dualvision/page.tsx"],"sourcesContent":["\"use client\"\n// new imports - add at top of file\nimport { loadModels } from \"@/lib/models\"\nimport { runRealDrowsinessDetection, runRealHazardDetection } from \"@/lib/detection\"\nimport { logDrowsinessEvent, logHazardEvents, startVaseSession, endVaseSession, logVaseAlert } from \"@/lib/supabase/analytics\"\nimport { useState, useRef, useCallback, useEffect } from \"react\"\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Switch } from \"@/components/ui/switch\"\nimport { Label } from \"@/components/ui/label\"\nimport { Input } from \"@/components/ui/input\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Progress } from \"@/components/ui/progress\"\nimport {\n  Eye,\n  Video,\n  VideoOff,\n  Volume2,\n  VolumeX,\n  AlertTriangle,\n  Phone,\n  ArrowLeft,\n  Shield,\n  Bell,\n  Camera,\n  Gauge,\n} from \"lucide-react\"\nimport Link from \"next/link\"\nimport { VisionAILogo } from \"@/components/ui/vision-ai-logo\"\nimport type { DVSERiskAssessment, DrowsinessMetrics, HazardDetection, SafetyStatus, AlertnessWindow, HazardObjectClass } from \"@/lib/types\"\nimport {\n  assessRisk,\n  createAlertnessWindow,\n  updateAlertnessWindow,\n  getStatusColor,\n} from \"@/lib/dvse/engine\"\n\n// Hazard class labels\nconst hazardLabels: Record<string, string> = {\n  cow: \"Cow\",\n  dog: \"Dog\",\n  buffalo: \"Buffalo\",\n  pothole: \"Pothole\",\n  debris: \"Debris\",\n  pedestrian: \"Pedestrian\",\n  broken_vehicle: \"Broken Vehicle\",\n  fallen_tree: \"Fallen Tree\",\n}\n\nexport default function DualVisionDemo() {\n  // Camera refs\n  const frontVideoRef = useRef<HTMLVideoElement>(null)\n  const rearVideoRef = useRef<HTMLVideoElement>(null)\n  const frontCanvasRef = useRef<HTMLCanvasElement>(null)\n  const rearCanvasRef = useRef<HTMLCanvasElement>(null)\n\n  // State\n  const [frontCameraActive, setFrontCameraActive] = useState(false)\n  const [rearCameraActive, setRearCameraActive] = useState(false)\n  const [isProcessing, setIsProcessing] = useState(false)\n  const [soundEnabled, setSoundEnabled] = useState(true)\n  const [emergencyContact, setEmergencyContact] = useState(\"\")\n\n  // VASE State\n  const [drowsiness, setDrowsiness] = useState<DrowsinessMetrics | null>(null)\n  const [hazards, setHazards] = useState<HazardDetection[]>([])\n  const [riskAssessment, setRiskAssessment] = useState<DVSERiskAssessment>({\n    overallStatus: \"safe\",\n    riskScore: 0,\n    alertnessRisk: 0,\n    hazardRisk: 0,\n    timestamp: Date.now(),\n    shouldAlert: false,\n    alertMessage: null,\n  })\n  const [alertnessWindow, setAlertnessWindow] = useState<AlertnessWindow>(() => createAlertnessWindow())\n  const [showAlert, setShowAlert] = useState(false)\n  const [alertHistory, setAlertHistory] = useState<{ time: Date; message: string; status: SafetyStatus }[]>([])\n\n  const audioRef = useRef<HTMLAudioElement | null>(null)\n  const sessionStartRef = useRef<Date | null>(null)\n  const sessionIdRef = useRef<string | null>(null)\n  const alertCountRef = useRef(0)\n  const hazardCountRef = useRef(0)\n  const alertnessSumRef = useRef(0)\n  const alertnessSamplesRef = useRef(0)\n\n  // // Simulate drowsiness detection (in production, use TensorFlow.js face-landmarks)\n  // const simulateDrowsinessDetection = useCallback((): DrowsinessMetrics => {\n  //   const baseAlertness = 75\n  //   const timeVariation = Math.sin(Date.now() / 15000) * 25\n  //   const randomVariation = (Math.random() - 0.5) * 15\n  //   const alertnessScore = Math.max(0, Math.min(100, baseAlertness + timeVariation + randomVariation))\n\n  //   return {\n  //     alertnessScore: Math.round(alertnessScore),\n  //     eyeAspectRatio: 0.2 + (alertnessScore / 100) * 0.15,\n  //     blinkCount: Math.floor(Math.random() * 20) + 10,\n  //     blinkFrequency: Math.floor(Math.random() * 10) + 12,\n  //     isAlert: alertnessScore >= 50,\n  //     headTilt: (Math.random() - 0.5) * 20,\n  //     lookingAway: Math.random() > 0.9,\n  //     yawning: Math.random() > 0.95,\n  //     lastUpdated: Date.now(),\n  //   }\n  // }, [])\n\n  // // Simulate hazard detection (in production, use YOLO model)\n  // const simulateHazardDetection = useCallback((): HazardDetection[] => {\n  //   if (Math.random() > 0.7) return []\n\n  //   const classes: HazardObjectClass[] = [\"cow\", \"pothole\", \"debris\", \"pedestrian\", \"dog\"]\n  //   const detectedClass: HazardObjectClass = classes[Math.floor(Math.random() * classes.length)]\n  //   const confidence = 0.6 + Math.random() * 0.35\n\n  //   const isCritical = [\"cow\", \"buffalo\", \"pedestrian\"].includes(detectedClass)\n  //   let severity: HazardDetection[\"severity\"] = \"low\"\n  //   if (isCritical && confidence > 0.8) severity = \"critical\"\n  //   else if (isCritical && confidence > 0.6) severity = \"high\"\n  //   else if (confidence > 0.8) severity = \"high\"\n  //   else if (confidence > 0.6) severity = \"medium\"\n\n  //   return [\n  //     {\n  //       id: `${Date.now()}`,\n  //       objectClass: detectedClass,\n  //       confidence,\n  //       severity,\n  //       bbox: {\n  //         x: 0.2 + Math.random() * 0.4,\n  //         y: 0.3 + Math.random() * 0.3,\n  //         width: 0.15 + Math.random() * 0.1,\n  //         height: 0.2 + Math.random() * 0.1,\n  //       },\n  //       timestamp: Date.now(),\n  //     },\n  //   ]\n  // }, [])\n\n  // Main detection loop\n  const runDetection = useCallback(async () => {\n  // Drowsiness (front)\n  let newDrowsiness = null\n  if (frontCameraActive && frontVideoRef.current) {\n    try {\n      const dr = await runRealDrowsinessDetection(frontVideoRef.current)\n      if (dr) {\n        newDrowsiness = dr\n        setDrowsiness(dr)\n        const newWindow = updateAlertnessWindow(alertnessWindow, dr.alertnessScore)\n        setAlertnessWindow(newWindow)\n      }\n    } catch (err) {\n      console.error(\"Real drowsiness detection error:\", err)\n    }\n  } else {\n    // fallback: keep old rolling avg if no front camera\n    newDrowsiness = drowsiness\n  }\n\n  // Hazards (rear)\n  let newHazards: any[] = []\n  if (rearCameraActive && rearVideoRef.current) {\n    try {\n      newHazards = await runRealHazardDetection(rearVideoRef.current)\n      setHazards(newHazards)\n    } catch (err) {\n      console.error(\"Real hazard detection error:\", err)\n      newHazards = []\n    }\n  } else {\n    newHazards = []\n    setHazards([])\n  }\n\n  // If models didn't run (camera off), skip assessment\n  const smoothed = alertnessWindow.average\n  const assessment = assessRisk(newDrowsiness, newHazards, smoothed)\n  setRiskAssessment(assessment)\n\n  // accumulate stats for current session\n  if (newDrowsiness) {\n    alertnessSumRef.current += newDrowsiness.alertnessScore\n    alertnessSamplesRef.current += 1\n  }\n  hazardCountRef.current += newHazards.length\n\n  // Persist tick data to Supabase (per-tick logging)\n  if (newDrowsiness) {\n    logDrowsinessEvent({\n      alertnessScore: newDrowsiness.alertnessScore,\n      ear: newDrowsiness.eyeAspectRatio,\n      blinkFrequency: newDrowsiness.blinkFrequency,\n      triggeredAlert: assessment.shouldAlert,\n      sessionId: sessionIdRef.current,\n    })\n  }\n\n  if (newHazards.length > 0) {\n    logHazardEvents(newHazards, sessionIdRef.current)\n  }\n\n  // handle alerts same as before\n  if (assessment.shouldAlert && !showAlert) {\n    alertCountRef.current += 1\n    setShowAlert(true)\n    setAlertHistory((prev) => [\n      ...prev.slice(-9),\n      { time: new Date(), message: assessment.alertMessage || \"Alert\", status: assessment.overallStatus },\n    ])\n    if (soundEnabled && audioRef.current) audioRef.current.play().catch(() => {})\n    const severity =\n      assessment.overallStatus === \"high-risk\"\n        ? \"critical\"\n        : assessment.overallStatus === \"caution\"\n          ? \"medium\"\n          : \"low\"\n\n    // Log a high-level VASE alert for the dashboard\n    logVaseAlert({\n      sessionId: sessionIdRef.current,\n      severity,\n      title: assessment.alertMessage || \"Vision-AI Safety Alert\",\n      description: assessment.alertMessage,\n    })\n\n    // Auto-send email on drowsiness < 50 or high-severity highway hazards\n    const alertnessThreshold = 50\n    const highSeverityHazards = [\"cow\", \"buffalo\", \"deer\", \"elk\", \"bear\", \"fallen_tree\", \"pothole\", \"debris\"]\n    const hasHighSeverityHazard = newHazards.some(h => highSeverityHazards.includes(h.objectClass))\n    const drowsinessBelowThreshold = newDrowsiness && newDrowsiness.alertnessScore < alertnessThreshold\n\n    if (drowsinessBelowThreshold || hasHighSeverityHazard) {\n      const contact = emergencyContact.trim() || undefined\n      let message = \"\"\n      if (drowsinessBelowThreshold && hasHighSeverityHazard) {\n        message = `Drowsiness detected (${newDrowsiness!.alertnessScore}%) and high-severity hazards detected (${newHazards.filter(h => highSeverityHazards.includes(h.objectClass)).map(h => h.objectClass).join(\", \")}). Please check on the driver immediately.`\n      } else if (drowsinessBelowThreshold) {\n        message = `Drowsiness detected (${newDrowsiness!.alertnessScore}%). Please check on the driver immediately.`\n      } else if (hasHighSeverityHazard) {\n        message = `High-severity hazards detected: ${newHazards.filter(h => highSeverityHazards.includes(h.objectClass)).map(h => h.objectClass).join(\", \")}). Please advise the driver immediately.`\n      }\n\n      fetch(\"/api/email-alert\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          subject: \"Vision-AI Safety Alert\",\n          message,\n          to: contact,\n        }),\n      }).catch(() => {\n        // best-effort; avoid breaking UI if email fails\n      })\n    }\n    setTimeout(() => setShowAlert(false), 5000)\n  }\n\n  // draw boxes on rear canvas if detection present\n  drawDetections(newHazards)\n}, [frontCameraActive, rearCameraActive, alertnessWindow, drowsiness, showAlert, soundEnabled])\n\n  // Draw bounding boxes on rear camera canvas\n  const drawDetections = (detections: HazardDetection[]) => {\n    const canvas = rearCanvasRef.current\n    const video = rearVideoRef.current\n    if (!canvas || !video) return\n\n    const ctx = canvas.getContext(\"2d\")\n    if (!ctx) return\n\n    canvas.width = video.videoWidth || 640\n    canvas.height = video.videoHeight || 480\n    ctx.clearRect(0, 0, canvas.width, canvas.height)\n\n    detections.forEach((det) => {\n      const x = det.bbox.x * canvas.width\n      const y = det.bbox.y * canvas.height\n      const w = det.bbox.width * canvas.width\n      const h = det.bbox.height * canvas.height\n\n      // Color based on severity\n      const colors = {\n        critical: \"#ef4444\",\n        high: \"#f59e0b\",\n        medium: \"#06b6d4\",\n        low: \"#22c55e\",\n      } as const\n      ctx.strokeStyle = colors[det.severity]\n      ctx.lineWidth = 3\n      ctx.strokeRect(x, y, w, h)\n\n      // Label\n      const label = `${hazardLabels[det.objectClass] || det.objectClass} ${Math.round(det.confidence * 100)}%`\n      ctx.fillStyle = ctx.strokeStyle\n      const textWidth = ctx.measureText(label).width\n      ctx.fillRect(x, y - 24, textWidth + 12, 24)\n      ctx.fillStyle = \"#fff\"\n      ctx.font = \"14px sans-serif\"\n      ctx.fillText(label, x + 6, y - 7)\n    })\n  }\n\n  // Toggle front camera (for drowsiness)\n  const toggleFrontCamera = async () => {\n    if (frontCameraActive) {\n      const stream = frontVideoRef.current?.srcObject as MediaStream\n      stream?.getTracks().forEach((track) => track.stop())\n      if (frontVideoRef.current) frontVideoRef.current.srcObject = null\n      setFrontCameraActive(false)\n    } else {\n      try {\n        const stream = await navigator.mediaDevices.getUserMedia({\n          video: { facingMode: \"user\", width: 640, height: 480 },\n        })\n        if (frontVideoRef.current) {\n          frontVideoRef.current.srcObject = stream\n          setFrontCameraActive(true)\n          if (!sessionStartRef.current) sessionStartRef.current = new Date()\n        }\n      } catch (err) {\n        console.error(\"Front camera access failed:\", err)\n      }\n    }\n  }\n\n  // Toggle rear camera (for hazards)\n  const toggleRearCamera = async () => {\n    if (rearCameraActive) {\n      const stream = rearVideoRef.current?.srcObject as MediaStream\n      stream?.getTracks().forEach((track) => track.stop())\n      if (rearVideoRef.current) rearVideoRef.current.srcObject = null\n      setRearCameraActive(false)\n    } else {\n      try {\n        const stream = await navigator.mediaDevices.getUserMedia({\n          video: { facingMode: \"environment\", width: 1280, height: 720 },\n        })\n        if (rearVideoRef.current) {\n          rearVideoRef.current.srcObject = stream\n          setRearCameraActive(true)\n          if (!sessionStartRef.current) sessionStartRef.current = new Date()\n        }\n      } catch (err) {\n        console.error(\"Rear camera access failed:\", err)\n      }\n    }\n  }\n\n  // Toggle processing\n  const toggleProcessing = () => {\n    if (!isProcessing) {\n      // starting a new VASE session\n      startVaseSession().then((id) => {\n        sessionIdRef.current = id\n        alertCountRef.current = 0\n        hazardCountRef.current = 0\n        alertnessSumRef.current = 0\n        alertnessSamplesRef.current = 0\n      })\n    } else {\n      // stopping session: finalize stats\n      if (sessionIdRef.current) {\n        const averageAlertness =\n          alertnessSamplesRef.current > 0 ? alertnessSumRef.current / alertnessSamplesRef.current : null\n\n        endVaseSession({\n          sessionId: sessionIdRef.current,\n          startTime: sessionStartRef.current,\n          totalAlerts: alertCountRef.current,\n          averageAlertness,\n          hazardsDetected: hazardCountRef.current,\n          emergencyContactNotified: false,\n        })\n      }\n      sessionIdRef.current = null\n    }\n    setIsProcessing(!isProcessing)\n  }\n\n  // Run detection loop when processing\n  useEffect(() => {\n  if (!isProcessing) return\n\n  let active = true\n\n  const loop = async () => {\n    while (active && isProcessing) {\n      await runDetection() // wait for model to finish\n      await new Promise((r) => setTimeout(r, 500)) // pause 500ms\n    }\n  }\n\n  loop()\n\n  return () => {\n    active = false\n  }\n}, [isProcessing, runDetection])\n  // Load TensorFlow models on client mount only\nuseEffect(() => {\n  if (typeof window === \"undefined\") return // prevent SSR failures\n\n  let mounted = true\n  ;(async () => {\n    try {\n      console.log(\"Loading TFJS models...\")\n      await loadModels()\n      if (mounted) console.log(\"Models ready \")\n    } catch (err) {\n      console.error(\"Error loading models:\", err)\n    }\n  })()\n\n  return () => {\n    mounted = false\n  }\n}, [])\n\n  // Get status display\n  const getStatusDisplay = (status: SafetyStatus) => {\n    switch (status) {\n      case \"safe\":\n        return { label: \"SAFE\", bg: \"bg-success\", text: \"text-success\" }\n      case \"caution\":\n        return { label: \"CAUTION\", bg: \"bg-warning\", text: \"text-warning\" }\n      case \"high-risk\":\n        return { label: \"HIGH RISK\", bg: \"bg-destructive\", text: \"text-destructive\" }\n    }\n  }\n\n  const statusDisplay = getStatusDisplay(riskAssessment.overallStatus)\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Audio for alerts */}\n      <audio ref={audioRef} preload=\"auto\">\n        <source\n          src=\"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2teleU9PT46xvqF0Q0VBetjD2aJtOUJdxN7j4Z2CUUpBfbG8rH1LS0ttyuLx8qqIU0tBfaq6rnlKSEtzz+j2+qqJVEpAf6m5r3pJR0p40O3++q2MVUY8g6y5r31KSEp40vD//7GOVkY7hK66sH5KSUl41PL//7KQWEI4h6+7sYBLSkh41vT//7WSWUE2iLC8soFMS0h41/X//7iTW0E1irC8s4JNTEh52Pb//7qUXEAzjLG9tIROTUd52ff//7yVXkAyi7K+tYVPTkd52vj//76XX0Axi7O/toZQT0Z63Pn//8CYYEA\"\n          type=\"audio/wav\"\n        />\n      </audio>\n\n      {/* Header */}\n      <header className=\"border-b border-border bg-card/50 backdrop-blur sticky top-0 z-40\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex items-center justify-between h-16\">\n            <div className=\"flex items-center gap-4\">\n              <Link\n                href=\"/\"\n                className=\"flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors\"\n              >\n                <ArrowLeft className=\"h-4 w-4\" />\n                <span className=\"hidden sm:inline\">Back</span>\n              </Link>\n              <VisionAILogo size=\"sm\" />\n            </div>\n            <Badge variant=\"secondary\" className=\"gap-1\">\n              <Shield className=\"h-3 w-3\" />\n              Vision-AI Safety Engine (VASE)\n            </Badge>\n          </div>\n        </div>\n      </header>\n\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {/* Risk Assessment Banner */}\n        <motion.div\n          className={`mb-6 p-4 rounded-xl border ${\n            riskAssessment.overallStatus === \"high-risk\"\n              ? \"border-destructive bg-destructive/10\"\n              : riskAssessment.overallStatus === \"caution\"\n                ? \"border-warning bg-warning/10\"\n                : \"border-success bg-success/10\"\n          }`}\n          animate={riskAssessment.shouldAlert ? { scale: [1, 1.02, 1] } : {}}\n          transition={{ duration: 0.5, repeat: riskAssessment.shouldAlert ? Number.POSITIVE_INFINITY : 0 }}\n        >\n          <div className=\"flex flex-col sm:flex-row items-center justify-between gap-4\">\n            <div className=\"flex items-center gap-4\">\n              <div className={`h-16 w-16 rounded-full flex items-center justify-center ${statusDisplay.bg}`}>\n                <Shield className=\"h-8 w-8 text-white\" />\n              </div>\n              <div>\n                <div className={`text-2xl font-bold ${statusDisplay.text}`}>{statusDisplay.label}</div>\n                <div className=\"text-sm text-muted-foreground\">\n                  Risk Score: {riskAssessment.riskScore}% | Alertness Risk: {Math.round(riskAssessment.alertnessRisk)}% | Hazard\n                  Risk: {riskAssessment.hazardRisk}%\n                </div>\n              </div>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <Button onClick={toggleProcessing} variant={isProcessing ? \"destructive\" : \"default\"} size=\"lg\">\n                {isProcessing ? \"Stop VASE\" : \"Start VASE\"}\n              </Button>\n            </div>\n          </div>\n        </motion.div>\n\n        <div className=\"grid lg:grid-cols-2 gap-6\">\n          {/* Front Camera - Drowsiness */}\n          <Card>\n            <CardHeader className=\"pb-4\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-2\">\n                  <Eye className=\"h-5 w-5 text-primary\" />\n                  <div>\n                    <CardTitle>Front Camera</CardTitle>\n                    <CardDescription>Driver Alertness Monitoring</CardDescription>\n                  </div>\n                </div>\n                <Button onClick={toggleFrontCamera} variant={frontCameraActive ? \"destructive\" : \"outline\"} size=\"sm\">\n                  {frontCameraActive ? <VideoOff className=\"h-4 w-4\" /> : <Video className=\"h-4 w-4\" />}\n                </Button>\n              </div>\n            </CardHeader>\n            <CardContent className=\"p-0\">\n              <div className=\"relative aspect-video bg-secondary/30\">\n                <video ref={frontVideoRef} autoPlay playsInline muted className=\"w-full h-full object-cover\" />\n                <canvas ref={frontCanvasRef} className=\"absolute inset-0 w-full h-full pointer-events-none\" />\n\n                {!frontCameraActive && (\n                  <div className=\"absolute inset-0 flex items-center justify-center\">\n                    <div className=\"text-center\">\n                      <Eye className=\"h-12 w-12 text-muted-foreground/30 mx-auto mb-2\" />\n                      <p className=\"text-sm text-muted-foreground\">Front camera for drowsiness detection</p>\n                    </div>\n                  </div>\n                )}\n\n                {/* Drowsiness Overlay */}\n                {frontCameraActive && drowsiness && (\n                  <div className=\"absolute bottom-4 left-4 right-4 bg-background/80 backdrop-blur rounded-lg p-3\">\n                    <div className=\"flex items-center justify-between mb-2\">\n                      <span className=\"text-sm font-medium\">Alertness</span>\n                      <span className={`text-lg font-bold ${getStatusColor(riskAssessment.overallStatus)}`}>\n                        {Math.round(alertnessWindow.average)}%\n                      </span>\n                    </div>\n                    <Progress value={alertnessWindow.average} className=\"h-2\" />\n                    <div className=\"flex justify-between text-xs text-muted-foreground mt-2\">\n                      <span>EAR: {drowsiness.eyeAspectRatio.toFixed(3)}</span>\n                      <span>Blinks/min: {drowsiness.blinkFrequency}</span>\n                    </div>\n                  </div>\n                )}\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Rear Camera - Hazards */}\n          <Card>\n            <CardHeader className=\"pb-4\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-2\">\n                  <AlertTriangle className=\"h-5 w-5 text-warning\" />\n                  <div>\n                    <CardTitle>Rear Camera</CardTitle>\n                    <CardDescription>Road Hazard Detection</CardDescription>\n                  </div>\n                </div>\n                <Button onClick={toggleRearCamera} variant={rearCameraActive ? \"destructive\" : \"outline\"} size=\"sm\">\n                  {rearCameraActive ? <VideoOff className=\"h-4 w-4\" /> : <Camera className=\"h-4 w-4\" />}\n                </Button>\n              </div>\n            </CardHeader>\n            <CardContent className=\"p-0\">\n              <div className=\"relative aspect-video bg-secondary/30\">\n                <video ref={rearVideoRef} autoPlay playsInline muted className=\"w-full h-full object-cover\" />\n                <canvas ref={rearCanvasRef} className=\"absolute inset-0 w-full h-full pointer-events-none\" />\n\n                {!rearCameraActive && (\n                  <div className=\"absolute inset-0 flex items-center justify-center\">\n                    <div className=\"text-center\">\n                      <Camera className=\"h-12 w-12 text-muted-foreground/30 mx-auto mb-2\" />\n                      <p className=\"text-sm text-muted-foreground\">Rear camera for hazard detection</p>\n                    </div>\n                  </div>\n                )}\n\n                {/* Hazard Overlay */}\n                {rearCameraActive && hazards.length > 0 && (\n                  <div className=\"absolute top-4 right-4\">\n                    <Badge variant=\"destructive\" className=\"animate-pulse\">\n                      {hazards.length} Hazard{hazards.length > 1 ? \"s\" : \"\"} Detected\n                    </Badge>\n                  </div>\n                )}\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Bottom Row */}\n        <div className=\"grid lg:grid-cols-3 gap-6 mt-6\">\n          {/* Risk Meter */}\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Gauge className=\"h-5 w-5\" />\n                Unified Risk Meter\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-4\">\n                <div className=\"relative h-32 flex items-end justify-center\">\n                  <div className=\"absolute inset-0 flex items-center justify-center\">\n                    <div className={`text-5xl font-bold ${getStatusColor(riskAssessment.overallStatus)}`}>\n                      {riskAssessment.riskScore}%\n                    </div>\n                  </div>\n                </div>\n                <div className=\"h-4 rounded-full bg-gradient-to-r from-success via-warning to-destructive overflow-hidden\">\n                  <motion.div\n                    className=\"h-full bg-foreground/20\"\n                    style={{ marginLeft: `${riskAssessment.riskScore}%` }}\n                    animate={{ marginLeft: `${riskAssessment.riskScore}%` }}\n                  />\n                </div>\n                <div className=\"flex justify-between text-xs text-muted-foreground\">\n                  <span>Safe</span>\n                  <span>Caution</span>\n                  <span>High Risk</span>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Current Detections */}\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <AlertTriangle className=\"h-5 w-5\" />\n                Active Hazards\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              {hazards.length === 0 ? (\n                <div className=\"text-center py-8 text-muted-foreground\">\n                  <Shield className=\"h-8 w-8 mx-auto mb-2 opacity-30\" />\n                  <p className=\"text-sm\">No hazards detected</p>\n                </div>\n              ) : (\n                <div className=\"space-y-2\">\n                  {hazards.map((hazard) => (\n                    <div key={hazard.id} className=\"p-3 rounded-lg bg-warning/10 border border-warning/20\">\n                      <div className=\"flex items-center justify-between\">\n                        <span className=\"font-medium\">{hazardLabels[hazard.objectClass]}</span>\n                        <Badge\n                          variant={hazard.severity === \"critical\" ? \"destructive\" : \"secondary\"}\n                          className=\"text-xs\"\n                        >\n                          {hazard.severity}\n                        </Badge>\n                      </div>\n                      <div className=\"text-sm text-muted-foreground mt-1\">\n                        Confidence: {Math.round(hazard.confidence * 100)}%\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </CardContent>\n          </Card>\n\n          {/* Settings & Alert History */}\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Bell className=\"h-5 w-5\" />\n                Settings & Alerts\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-2\">\n                  {soundEnabled ? <Volume2 className=\"h-4 w-4\" /> : <VolumeX className=\"h-4 w-4\" />}\n                  <Label htmlFor=\"sound\">Alert Sound</Label>\n                </div>\n                <Switch id=\"sound\" checked={soundEnabled} onCheckedChange={setSoundEnabled} />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"emergency\" className=\"flex items-center gap-2\">\n                  <Bell className=\"h-4 w-4\" />\n                  Emergency Email\n                </Label>\n                <Input\n                  id=\"emergency\"\n                  type=\"email\"\n                  placeholder=\"emergency@example.com\"\n                  value={emergencyContact}\n                  onChange={(e) => setEmergencyContact(e.target.value)}\n                />\n              </div>\n\n              {alertHistory.length > 0 && (\n                <div className=\"pt-4 border-t border-border\">\n                  <div className=\"text-sm font-medium mb-2\">Recent Alerts</div>\n                  <div className=\"space-y-1 max-h-32 overflow-y-auto\">\n                    {alertHistory.slice(-3).map((alert, i) => (\n                      <div key={i} className=\"text-xs text-muted-foreground flex justify-between\">\n                        <span className=\"truncate flex-1\">{alert.message}</span>\n                        <span>{alert.time.toLocaleTimeString()}</span>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </div>\n      </main>\n\n      {/* Fullscreen Alert Overlay */}\n      <AnimatePresence>\n        {showAlert && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className={`fixed inset-0 z-50 backdrop-blur-sm flex items-center justify-center ${\n              riskAssessment.overallStatus === \"high-risk\" ? \"bg-destructive/20\" : \"bg-warning/20\"\n            }`}\n            onClick={() => setShowAlert(false)}\n          >\n            <motion.div\n              initial={{ scale: 0.8 }}\n              animate={{ scale: 1 }}\n              exit={{ scale: 0.8 }}\n              className={`${\n                riskAssessment.overallStatus === \"high-risk\" ? \"bg-destructive\" : \"bg-warning\"\n              } text-white p-8 rounded-2xl text-center max-w-md mx-4`}\n            >\n              <AlertTriangle className=\"h-16 w-16 mx-auto mb-4 animate-pulse\" />\n              <h2 className=\"text-2xl font-bold mb-2\">\n                {riskAssessment.overallStatus === \"high-risk\" ? \"DANGER DETECTED\" : \"CAUTION\"}\n              </h2>\n              <p className=\"mb-4\">{riskAssessment.alertMessage}</p>\n              <Button variant=\"secondary\" onClick={() => setShowAlert(false)}>\n                Acknowledge\n              </Button>\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}